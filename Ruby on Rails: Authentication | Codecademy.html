<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="https://www.facebook.com/2008/fbml" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"8502746af5","applicationID":"2210607","transactionName":"c1hZF0tfVQkEExo0A1NcGCR8ZBkTUEwPExFVRWgKXR1IEAgbGAoLQ0M=","queueTime":0,"applicationTime":535,"agent":""}</script>
<script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VwYAVVFXGwECVVFUBwY="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(20),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,s.now(),!0])}catch(u){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,s.now()])}var i=t("handle"),a=t(21),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(p){"stack"in p&&(t(13),t(12),"addEventListener"in window&&t(6),s.xhrWrappable&&t(14),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){M++,S=y.hash,this[u]=b.now()}function o(){M--,y.hash!==S&&i(0,!0);var t=b.now();this[l]=~~this[l]+t-this[u],this[d]=t}function i(t,e){E.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=b.now()})}var c="-start",s="-end",f="-body",u="fn"+c,d="fn"+s,p="cb"+c,h="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location,b=t("loader");if(w[v]&&b.xhrWrappable){var g=t(10),x=t(11),E=t(8),P=t(6),O=t(13),R=t(7),T=t(14),L=t(9),j=t("ee"),N=j.get("tracer");t(15),b.features.spa=!0;var S,M=0;j.on(u,r),j.on(p,r),j.on(d,o),j.on(h,o),j.buffer([u,d,"xhr-done","xhr-resolved"]),P.buffer([u]),O.buffer(["setTimeout"+s,"clearTimeout"+c,u]),T.buffer([u,"new-xhr","send-xhr"+c]),R.buffer([m+c,m+"-done",m+f+c,m+f+s]),E.buffer(["newURL"]),g.buffer([u]),x.buffer(["propagate",p,h,"executor-err","resolve"+c]),N.buffer([u,"no-"+u]),L.buffer(["new-jsonp","cb-start","jsonp-error","jsonp-end"]),a(T,"send-xhr"+c),a(j,"xhr-resolved"),a(j,"xhr-done"),a(R,m+c),a(R,m+"-done"),a(L,"new-jsonp"),a(L,"jsonp-end"),a(L,"cb-start"),E.on("pushState-end",i),E.on("replaceState-end",i),w[v]("hashchange",i,!0),w[v]("load",i,!0),w[v]("popstate",function(){i(0,M>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(13),c=t(12),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",h="-start",l="-end",m="fn"+h,v="fn"+l,w="bstTimer",y="pushState",b=t("loader");b.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=b.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,b.now()])}),a.on(m,function(t,e,n){this.bstStart=b.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),this.bstType])}),c.on(m,function(){this.bstStart=b.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),"requestAnimationFrame"])}),o.on(y+h,function(t){this.time=b.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(23)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(20);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,h="prototype";u&&d&&p&&(i(f,function(t,e){r(u[h],e,s),r(d[h],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(23)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){function r(t){function e(){s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}function n(){s.emit("jsonp-error",[],p),s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}var r=t&&"string"==typeof t.nodeName&&"script"===t.nodeName.toLowerCase();if(r){var o="function"==typeof t.addEventListener;if(o){var a=i(t.src);if(a){var u=c(a),d="function"==typeof u.parent[u.key];if(d){var p={};f.inPlace(u.parent,[u.key],"cb-",p),t.addEventListener("load",e,!1),t.addEventListener("error",n,!1),s.emit("new-jsonp",[t.src],p)}}}}}function o(){return"addEventListener"in window}function i(t){var e=t.match(u);return e?e[1]:null}function a(t,e){var n=t.match(p),r=n[1],o=n[3];return o?a(o,e[r]):e[r]}function c(t){var e=t.match(d);return e&&e.length>=3?{key:e[2],parent:a(e[1],window)}:{key:t,parent:window}}var s=t("ee").get("jsonp"),f=t(23)(s);if(e.exports=s,o()){var u=/[?&](?:callback|cb)=([^&#]+)/,d=/(.*)\.([^.]+)/,p=/^(\w+)(\.|$)(.*)$/,h=["appendChild","insertBefore","replaceChild"];f.inPlace(HTMLElement.prototype,h,"dom-"),f.inPlace(HTMLHeadElement.prototype,h,"dom-"),f.inPlace(HTMLBodyElement.prototype,h,"dom-"),s.on("dom-start",function(t){r(t[0])})}},{}],10:[function(t,e,n){var r=t("ee").get("mutation"),o=t(23)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],11:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(23),a=t("ee").get("promise"),c=i(a),s=t(20),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],12:[function(t,e,n){var r=t("ee").get("raf"),o=t(23)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],13:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(23)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],14:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",c)}function i(t){b.push(t),l&&(x?x.then(a):v?v(a):(E=-E,P.data=E))}function a(){for(var t=0;t<b.length;t++)r([],b[t]);b.length&&(b=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(23)(u),p=NREUM.o,h=p.XHR,l=p.MO,m=p.PR,v=p.SI,w="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],b=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new h(t);try{u.emit("new-xhr",[e],e),e.addEventListener(w,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(h,g),g.prototype=h.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var x=m&&m.resolve();if(!v&&!m){var E=1,P=document.createTextNode(E);new l(a).observe(P,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===w||a()})},{}],15:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(16),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,p=t("id"),h=t(19),l=t(18),m=window.XMLHttpRequest;a.features.xhr=!0,t(14),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],16:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],17:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(20),c=t(21),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",h=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var l=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(h+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){l[e]=o(h+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],18:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],19:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],20:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],21:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],22:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],23:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(21),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),c=l(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[y[n]];return d&&d.push([b,n,r,a]),a}}function h(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},b={on:h,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return b}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var c="nr@context",s=t("gos"),f=t(20),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!x++){var t=g.info=NREUM.info,e=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(y,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+g.offset],null,"api");var n=p.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===p.readyState&&i()}function i(){s("mark",["domContent",a()+g.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-g.offset}var c=(new Date).getTime(),s=t("handle"),f=t(20),u=t("ee"),d=window,p=d.document,h="addEventListener",l="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1059.min.js"},b=m&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:c,now:a,origin:w,features:{},xhrWrappable:b};t(17),p[h]?(p[h]("DOMContentLoaded",i,!1),d[h]("load",r,!1)):(p[l]("onreadystatechange",o),d[l]("onload",r)),s("mark",["firstbyte",c],null,"api");var x=0,E=t(22)},{}]},{},["loader",2,15,5,3,4]);</script>
    <title>Ruby on Rails: Authentication | Codecademy</title>
    <link href="https://production.cdmycdn.com/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="https://www.codecademy.com/en/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i" rel="canonical" />
    <link href="/blog.rss" rel="alternate" title="Codecademy Blog" type="application/rss+xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="authenticity_token" name="csrf-param" />
<meta content="4NXFMxENP1GGziU8xrCzUlq5SifPsXTYixmn/oUsK3M=" name="csrf-token" />
    <meta name="description" content="Codecademy is the easiest way to learn how to code. It's interactive, fun, and you can do it with your friends."/>
    <meta name="keywords" content="codecademy,coding,code,programming"/>


    
<meta property="fb:app_id" content="212500508799908"/>
<meta property="fb:profile_id" content="codecademy"/>
<meta property="og:url" content="https://www.codecademy.com/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i?action=lesson_resume"/>
<meta property="og:site_name" content="Codecademy" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Ruby on Rails: Authentication" />
<meta property="og:description" content="Codecademy is the easiest way to learn how to code. It&#x27;s interactive, fun, and you can do it with your friends." />
<meta property="og:rich_attachment" content="true" />
<meta property="og:image" content="https://production.cdmycdn.com/assets/logo-codecademy-social-abfd8450722d675bddedde689f8af624.png" />
    
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@codecademy" />
<meta name="twitter:title" content="Ruby on Rails: Authentication" />
<meta name="twitter:description" content="Codecademy is the easiest way to learn how to code. It&#x27;s interactive, fun, and you can do it with your friends." />
<meta name="twitter:image" content="https://production.cdmycdn.com/assets/logo-codecademy-social-abfd8450722d675bddedde689f8af624.png" />

    
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />

    


    
    








    <link href="https://production.cdmycdn.com/assets/rebrand/core-067fd913f4a8a4b895e233b9489b1d13.css" media="screen" rel="stylesheet" type="text/css" />
      <link href="https://production.cdmycdn.com/assets/rebrand/controllers/learn/skills/exercise-913e4a009e7b7033d06ac1a9ec64d0b1.css" media="screen" rel="stylesheet" type="text/css" />


        <link href="//production.cdmycdn.com/webpack/vendor-047e7ce4e4101021149d.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="//production.cdmycdn.com/webpack/platform-047e7ce4e4101021149d.css" media="screen" rel="stylesheet" type="text/css" />


    <script type="text/javascript">
//<![CDATA[
var CCDATA = CCDATA || {};
//]]>
</script>

    
<script id="CCDATA" type="text/javascript">
//<![CDATA[

  var CCDATA = CCDATA || {};  CCDATA['env'] = "production"; CCDATA['request_host'] = "www.codecademy.com"; CCDATA['request_path'] = "/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i?action=lesson_resume"; CCDATA['asset_host'] = "production.cdmycdn.com"; CCDATA['webpack_public_path'] = "//production.cdmycdn.com/webpack/"; CCDATA['assets_compiled'] = true; CCDATA['pollForNotifications'] = false; CCDATA['locale'] = "en"; CCDATA['API_HOST'] = "/api"; CCDATA['authenticity_token'] = "4NXFMxENP1GGziU8xrCzUlq5SifPsXTYixmn/oUsK3M="; CCDATA['available_locales'] = "en|pt|et-EE|fa|en-US|ko|zh|fr|ja|ky-KG|en-GB|fr-FR|es-AR|pt-BR|ar|de|es|ru"; CCDATA['login_requires_captcha'] = false; CCDATA['register_requires_captcha'] = false; CCDATA['secureSandboxIndexPath'] = "/assets/secure/index-e15cd898fa5906b22c02b7fc4cf8e509.html"; CCDATA['workshop_url'] = "workshop.codecademy.com:443"; CCDATA['workshop_protocol'] = "wss"; CCDATA['current_user'] = {"_id":"58ed3ca42524c879a9000247","created_at":"2017-04-11T16:29:24-04:00","url":"http://www.codecademy.com/users/rubycoder61081","username":"rubyCoder61081","handle":"Alex Mireles","email":"leaps@msn.com","name":"Alex Mireles","profile_image_url":"https://graph.facebook.com/v2.8/10212772465970945/picture","points":1312,"total_points":1312,"roles":["pro"],"ui_tour_elements":{"discovery-checklist":true,"course-navigator":true},"deleted":false,"authentication_token":"jLAbfxmwirCUJXdTbyHV","pro":true,"pro_ads":false,"experiments":{"exp_anonymous_checkout_2017_09_13":"control","exp_intercom_intensive_marketing_pages_2017_10_02":"control","exp_microtransactions_2017_10_01":"control","exp_email_2017_02_06":"treatment"},"location":{"geo_continent":"North America","geo_country":"US","geo_city":null,"geo_postal":null,"geo_region":"CA"}}; CCDATA['codexHost'] = ["codex.codecademy.com"]; CCDATA['codexCredentials'] = ["1507874198","rails-auth.rubyCoder61081","3d43d8c9299bef259157b7a3d433972832fb975f"];
  CCDATA.secureSandboxIndexPath = 'https://production.cdmycdn.com/assets/secure/index-e15cd898fa5906b22c02b7fc4cf8e509.html';

//]]>
</script>

    
    <script type="text/javascript">
//<![CDATA[

      // If user is anonymous, do not provide a user id or Intercom will falsely assume they are
      // a signed-in user, so they won't be categorized as "visitors" (rather as "users")
      // and might miss out on some features

      (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/wft4jxth';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()

      const settings = {
        app_id: 'wft4jxth'
      };

        settings.user_id = '58ed3ca42524c879a9000247'

      // it's a SPA so use the boot method instead of window.intercomSettings
      window.Intercom('boot', settings);

      window.IntercomUpdate = function(traits) {
        var defaultTraits = {}
        defaultTraits.user_id = '58ed3ca42524c879a9000247';
        for (var attrname in traits) { defaultTraits[attrname] = traits[attrname]; }
        window.Intercom('update', defaultTraits);
      };

      window.IntercomUpdate({"name":"Alex Mireles","email":"leaps@msn.com","firstName":"Alex","lastName":"Mireles","birthday":"{\"month\"=\u003E\"7\", \"year\"=\u003E\"1968\", \"day\"=\u003E\"11\"}","website":"","avatar":"https://graph.facebook.com/v2.8/10212772465970945/picture","username":"rubyCoder61081","updated_at":"2017-10-12 21:16:49 -0400","last_activity_at":"2017-10-13 05:56:38 +0000","location":"Los Angeles","num_points":"1312","num_exercises":"1312","num_achievements":"234","deleted":"false","phone_number":"","path":"Full Stack","created_at":"2017-04-11 16:29:24 -0400","id":"58ed3ca42524c879a9000247","anonymous_user":"false","anonymous_user_id":"58ed3c669ad7f5299d000227","teacher":"false","student":"false","admin":"false","advisor":"false","pro":"true","pro_signup_cohort":"05_01_2017","github_student":"false","exp_anonymous_checkout_2017_09_13":"control","exp_intercom_intensive_marketing_pages_2017_10_02":"control","exp_microtransactions_2017_10_01":"control","exp_email_2017_02_06":"treatment","unsubscribed":"false","verified_email":"false","suspicious_email":"false","geo_continent":"North America","geo_country":"US","geo_region":"CA","advisor_report":"https://www.codecademy.com/advisor/reports/58ed3ca42524c879a9000247","utm_source":"","utm_medium":"","utm_term":"","utm_campaign":"","utm_content":""});

//]]>
</script>  <script src="//production.cdmycdn.com/webpack/head-047e7ce4e4101021149d.js" type="text/javascript"></script>
    <script type="text/javascript">
//<![CDATA[

      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
        analytics.load("awTEDiBEJ130cCHG1N74clKHGM3FLNzQ");
        analytics.page();
      }}();

//]]>
</script>    <script type="text/javascript">
      /* <![CDATA[ */
      var google_conversion_id = 861461659;
      var google_custom_params = window.google_tag_params;
      var google_remarketing_only = true;
      /* ]]> */
    </script>
    <style>
      /* inline to stay with Google script that creates iframe */
      iframe[name="google_conversion_frame"] {
        display: none !important;
        height: 0 !important;
        width: 0 !important;
        line-height: 0 !important;
        font-size: 0 !important;
        float: left;
      }
    </style>
    <!-- Hotjar Tracking Code for www.codecademy.com -->
    <script type="text/javascript">
//<![CDATA[

        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:451715,hjsv:5};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');

//]]>
</script>

    
  </head>

  <body browser="mac">

    
  <div id="fb-root"></div>
  <script type="text/javascript">
//<![CDATA[

    var FB_APP_ID = '212500508799908';
    window.fbAsyncInit = function() {
      var FB = (window.FB || undefined);
      if (FB) {
        FB.init({
          appId      : FB_APP_ID
        , channelUrl : window.root_url+'/channel.html'
        , status     : true
        , cookie     : true
        , xfbml      : true
        , version    : 'v2.8'
        });
      }
    };
    <!-- Load Facebook SDK for JavaScript -->
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

//]]>
</script>
    <!-- Facebook Pixel Code -->
    <script>
     !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
     n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
     n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
     t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
     document,'script','//connect.facebook.net/en_US/fbevents.js');

     fbq('init', '1036078779778355');
     fbq('track', "PageView");</script>
    <noscript><img height="1" width="1" style="display:none"
     src="https://www.facebook.com/tr?id=1036078779778355&ev=PageView&noscript=1"
     /></noscript>
    <!-- End Facebook Pixel Code -->


      <div class="react-root" data-react-class="PlatformRouter" data-react-props="{&quot;proData&quot;:{&quot;paths&quot;:{&quot;join_pro&quot;:&quot;/pro/membership&quot;},&quot;assets&quot;:{&quot;wave_img&quot;:&quot;/assets/pro/wave-pro-dd4070e2f5afa0ef78af5dfa02d3b53e.svg&quot;},&quot;experiment_values&quot;:{&quot;header&quot;:&quot;Not sure where to start?&quot;,&quot;body&quot;:&quot;Let us set you up for success with a personalized learning path.&quot;,&quot;hint&quot;:&quot;Get live, fast support from Codecademy Advisors when you get stuck.&quot;,&quot;utm_content&quot;:&quot;wheretostart&quot;,&quot;image_url&quot;:&quot;https://s3.amazonaws.com/codecademy-images/pro/variants-path.svg&quot;,&quot;utm_campaign&quot;:&quot;dashboard_release&quot;,&quot;utm_source&quot;:&quot;codecademy_platform&quot;},&quot;utm_params&quot;:{&quot;utm_content&quot;:&quot;wheretostart&quot;,&quot;utm_campaign&quot;:&quot;dashboard_release&quot;,&quot;utm_source&quot;:&quot;codecademy_platform&quot;}},&quot;routesData&quot;:{&quot;sitePaths&quot;:{&quot;pro_my_path_ad_path_wrapper&quot;:&quot;/pro/membership?utm_campaign=nov_2016\u0026utm_medium=internal_ad_le_dropdown\u0026utm_source=codecademy_platform&quot;,&quot;pro_my_path_ad_header_wrapper&quot;:&quot;/pro/membership?utm_campaign=dashboard_release\u0026utm_medium=internal_ad_header_upgrade\u0026utm_source=codecademy_platform&quot;}},&quot;platformPage&quot;:{&quot;profileImage&quot;:&quot;https://graph.facebook.com/v2.8/10212772465970945/picture&quot;,&quot;hasButterbar&quot;:null,&quot;revision&quot;:null,&quot;collaborationSession&quot;:{&quot;userId&quot;:&quot;58ed3ca42524c879a9000247&quot;},&quot;modals&quot;:{&quot;signUp&quot;:{&quot;errors&quot;:[null],&quot;redirectUrl&quot;:&quot;/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i?action=lesson_resume&quot;},&quot;signIn&quot;:{&quot;errors&quot;:[null],&quot;redirectUrl&quot;:&quot;/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i?action=lesson_resume&quot;}},&quot;features&quot;:{&quot;microtransactions&quot;:&quot;control&quot;},&quot;exitPaths&quot;:{&quot;logo&quot;:&quot;/en/courses/rails-auth&quot;,&quot;back&quot;:&quot;/en/courses/rails-auth&quot;,&quot;title&quot;:&quot;Ruby on Rails: Authentication&quot;},&quot;progress&quot;:{&quot;overall_progress&quot;:{},&quot;current_state&quot;:{&quot;lesson&quot;:0,&quot;exercise&quot;:4,&quot;checkpoint&quot;:1},&quot;last_active&quot;:&quot;2017-10-13T01:16:49+00:00&quot;},&quot;course&quot;:{&quot;created_at&quot;:null,&quot;description&quot;:&quot;Learn how to add user sign up, login and logout functionality to your Rails applications in this intermediate course.&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/rails-auth.en.yml&quot;,&quot;id&quot;:&quot;rails-auth_en_master&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;meta&quot;:{&quot;authors&quot;:[&quot;BanaKM&quot;],&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/&quot;,&quot;forum_category&quot;:&quot;learn-rails&quot;,&quot;glossary_url&quot;:&quot;https://www.codecademy.com/glossary/ruby&quot;,&quot;tags&quot;:[],&quot;maintenance&quot;:false},&quot;node_type&quot;:&quot;course&quot;,&quot;revision&quot;:&quot;master&quot;,&quot;slug&quot;:&quot;rails-auth&quot;,&quot;title&quot;:&quot;Ruby on Rails: Authentication&quot;,&quot;units&quot;:{&quot;authentication&quot;:{&quot;node_type&quot;:&quot;unit&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;projects&quot;:{&quot;rails-auth_newstand-1&quot;:{&quot;node_type&quot;:&quot;project&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;rails-auth_newstand-1&quot;,&quot;title&quot;:&quot;Newstand 1&quot;,&quot;description&quot;:&quot;In this project, you\u2019ll add sign up, log in, and log out system from scratch.&quot;,&quot;thumbnail_url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/project_thumbnails/rails-auth/newstand-1.jpg&quot;,&quot;preview_url&quot;:&quot;https://infinite-stream-5328.herokuapp.com/&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/rails-authnewstand-1&quot;,&quot;objective&quot;:&quot;Newstand wants to add an authentication system to their news app.\n\nAn authentication system is made up of three parts:\n1. A **signup page** for new users to create accounts\n2. A **login page**, for returning users to sign back in to the site\n3. A **log out functionality**, which allows users to sign out\n\nUse the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-forms\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide to add an authentication system.&quot;,&quot;meta&quot;:{&quot;authors&quot;:[&quot;BanaKM&quot;]},&quot;self_assessments&quot;:[{&quot;heading&quot;:&quot;Setup&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_0_1&quot;,&quot;text&quot;:&quot;Install the gems in the **Gemfile**&quot;},{&quot;key&quot;:&quot;Newstand_0_2&quot;,&quot;text&quot;:&quot;Run `rake db:seed` to seed the database with the data in **db/seeds.rb**.&quot;},{&quot;key&quot;:&quot;Newstand_0_3&quot;,&quot;text&quot;:&quot;Start a Rails server to preview the app in the browser. In the terminal, type:\n\n```bash\n$ rails server -p 4001\n```\n\nThis command starts a Rails server listening on port 4001. &quot;},{&quot;key&quot;:&quot;Newstand_0_4&quot;,&quot;text&quot;:&quot;Then visit http://localhost:4001 to see your app in the browser. The app currently has two main page:\n* The home page displays a list of all articles\n* When you click on an article, it shows that individual article\n\nWe&#x27;re going to add an authentication system to this app so that users need to be logged in to read individual articles.&quot;},{&quot;key&quot;:&quot;Newstand_0_5&quot;,&quot;text&quot;:&quot;To get started, shut down the Rails server. In the terminal, press **Ctrl+C**. We&#x27;ll restart the Rails server and preview the app later on after adding new functionality.&quot;},{&quot;key&quot;:&quot;Newstand_0_6&quot;,&quot;text&quot;:&quot;Add the `bcrypt` gem to the **Gemfile**. Then run `bundle install` to install the gems specified in the **Gemfile**.&quot;}]},{&quot;heading&quot;:&quot;Add a User model&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_1_0&quot;,&quot;text&quot;:&quot;Generate a model named User to store users&#x27; names, emails, and passwords.&quot;},{&quot;key&quot;:&quot;Newstand_1_1&quot;,&quot;text&quot;:&quot;Open the migration file in **db/migrate** for the users table, and add the following columns:\n* a string column called `first_name`\n* a string column called `last_name`\n* a string column called `email`\n* a string column called `password_digest`&quot;},{&quot;key&quot;:&quot;Newstand_1_2&quot;,&quot;text&quot;:&quot;Run the migration to update the database.&quot;},{&quot;key&quot;:&quot;Newstand_1_3&quot;,&quot;text&quot;:&quot;Add `has_secure_password` to the User model. This will let us save a securely-hashed password to the database, and adds a few helper methods that we&#x27;ll use later.\n&quot;}]},{&quot;heading&quot;:&quot;Check the database&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_2_0&quot;,&quot;text&quot;:&quot;Confirm that new users can be saved to the database by using the Rails console. The Rails console is a useful tool to interact with Rails apps. We&#x27;ll use it here to query the database. In the terminal, open a new tab by clicking the \u003Ci class=\&quot;fcn-icon fcn-icon-plus\&quot;\u003E\u003C/i\u003E&quot;},{&quot;key&quot;:&quot;Newstand_2_2&quot;,&quot;text&quot;:&quot;Start the Rails console.&quot;},{&quot;key&quot;:&quot;Newstand_2_3&quot;,&quot;text&quot;:&quot;When you enter the Rails console, create a new user using the `create` method:\n\n```ruby\n\u003E User.create(first_name: \&quot;Edna\&quot;, last_name: \&quot;Mode\&quot;, email: &#x27;edna@example.com&#x27;, password: &#x27;incredibles&#x27;)\n```&quot;},{&quot;key&quot;:&quot;Newstand_2_4&quot;,&quot;text&quot;:&quot;Find this user object using the `find_by` method, and save it into a variable named `myuser`. \u003Ca href=\&quot;http://guides.rubyonrails.org/active_record_basics.html#read\&quot; target=\&quot;_blank\&quot;\u003EHere&#x27;s an example of how to use the \u003Ccode\u003Efind_by\u003C/code\u003E method\u003C/a\u003E.\n&quot;},{&quot;key&quot;:&quot;Newstand_2_5&quot;,&quot;text&quot;:&quot;Print out the `myuser` object&#x27;s `email` attribute:\n\n```ruby\n\u003E myuser.email\n```&quot;},{&quot;key&quot;:&quot;Newstand_2_6&quot;,&quot;text&quot;:&quot;Print out the `myuser` object&#x27;s `password_digest` attribute. This is the encrypted version of the password you used to create the user object above. This encrypted password is constructed using the `bcrypt` gem you installed earlier. Storing encrypted passwords instead of original passwords is more secure.&quot;},{&quot;key&quot;:&quot;Newstand_2_7&quot;,&quot;text&quot;:&quot;Use the `authenticate` method with an incorrect password:\n\n```ruby\nmyuser.authenticate(\&quot;wrong_pwd\&quot;)\n```\n\nThe `has_secure_password` you added to the User model comes with a method named `authenticate`. When a user tries to log in again, Rails will use the `authenticate` method to determine whether the password entered is valid by first hashing it and then comparing it to the `password_digest` field in the database. Here, the wrong password should return `false`.&quot;},{&quot;key&quot;:&quot;Newstand_2_8&quot;,&quot;text&quot;:&quot;Use `authenticate` with the password that you created the user object with. The correct password should return the user itself.&quot;},{&quot;key&quot;:&quot;Newstand_2_9&quot;,&quot;text&quot;:&quot;Exit the Rails console by typing `exit`.&quot;}]},{&quot;heading&quot;:&quot;Signup page&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_3_0&quot;,&quot;text&quot;:&quot;An authentication system is made up of three parts - a signup page, a login page, and log out functionality. Let&#x27;s start by creating the signup page.\n\nGenerate a controller named Users.&quot;},{&quot;key&quot;:&quot;Newstand_3_1&quot;,&quot;text&quot;:&quot;In the routes file, map the GET request for the URL /signup to the Users controller&#x27;s `new` action.&quot;},{&quot;key&quot;:&quot;Newstand_3_2&quot;,&quot;text&quot;:&quot;In the routes file, also add the resource route for the Users controller.\n\n```ruby\nresources :users\n```&quot;},{&quot;key&quot;:&quot;Newstand_3_3&quot;,&quot;text&quot;:&quot;Run `rake routes` to view all the new URLs that are now available:\n* We&#x27;ll use `users#new` to handle GET requests and display the signup page\n* We&#x27;ll use `users#create` to handle POST requests and save a new user to the database&quot;},{&quot;key&quot;:&quot;Newstand_3_4&quot;,&quot;text&quot;:&quot;First, in the Users controller, make an action named `new` to handle the GET requests. Inside the `new` action, create a new User object and save it into a variable named `@user`.&quot;},{&quot;key&quot;:&quot;Newstand_3_5&quot;,&quot;text&quot;:&quot;In **app/views/users/new.html.erb**, use `form_for` to create a form with the fields of the `@user` object.&quot;},{&quot;key&quot;:&quot;Newstand_3_6&quot;,&quot;text&quot;:&quot;View the result by starting a Rails development server and visiting http://localhost:4001/signup. The signup form should display.&quot;},{&quot;key&quot;:&quot;Newstand_3_7&quot;,&quot;text&quot;:&quot;Second, in the Users controller, write a private method named `user_params`. Reqire the model name `user` and permit the column names `first_name`, `last_name`, `email`, and `password`.&quot;},{&quot;key&quot;:&quot;Newstand_3_8&quot;,&quot;text&quot;:&quot;Third, in the Users controller, make an action named `create` to handle the POST requests. Use `user_params` to create a new User object. If `user.save` is successful, redirect to the root path `/`. Otherwise, redirect to the signup page.&quot;},{&quot;key&quot;:&quot;Newstand_3_9&quot;,&quot;text&quot;:&quot;Restart the Rails server and view the changes by visiting http://localhost:4001/signup. Sign up as a new user and submit the form. \n\nTo restart a Rails server, in the terminal, first press **Ctrl+C** to shut down the server. Then type `rails server -p 4001` to start it again.&quot;},{&quot;key&quot;:&quot;Newstand_3_10&quot;,&quot;text&quot;:&quot;Start the Rails console and find your newly-created user to check that it was saved to the database.&quot;}]},{&quot;heading&quot;:&quot;Login page&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_4_0&quot;,&quot;text&quot;:&quot;Next, create a log in page.\n\nGenerate a controller named Sessions.&quot;},{&quot;key&quot;:&quot;Newstand_4_1&quot;,&quot;text&quot;:&quot;In the routes file, create a route that maps GET requests for the URL /login to the Sessions controller&#x27;s `new` action. We&#x27;ll use this route to handle GET requests and display the login page.&quot;},{&quot;key&quot;:&quot;Newstand_4_2&quot;,&quot;text&quot;:&quot;Then create another route that maps POST requests for the URL /login to the Sessions controller&#x27;s `create` action. We&#x27;ll use this route to handle POST requests and check whether the submitted username and password match the ones in the database.&quot;},{&quot;key&quot;:&quot;Newstand_4_3&quot;,&quot;text&quot;:&quot;First, in the Sessions controller, make an empty action named `new`.&quot;},{&quot;key&quot;:&quot;Newstand_4_4&quot;,&quot;text&quot;:&quot;In **app/views/sessions/new.html.erb**, create a form using `form_for`. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-login-i\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.\n\nThe difference between this login form and the signup form above is how we use `form_for`. In the signup form, we used `form_for(@user) do |f|` since we had a User model to refer to. For the login form, we don&#x27;t have a Session model, so we instead use the name of the resource and the corresponding URL with `form_for(:session, url: login_path) do |f|`.&quot;},{&quot;key&quot;:&quot;Newstand_4_5&quot;,&quot;text&quot;:&quot;Restart the Rails server and view the result by visiting http://localhost:4001/login.&quot;},{&quot;key&quot;:&quot;Newstand_4_6&quot;,&quot;text&quot;:&quot;Second, in the Sessions controller, make an action named `create` to handle `POST` requests. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-login-ii\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.&quot;},{&quot;key&quot;:&quot;Newstand_4_7&quot;,&quot;text&quot;:&quot;Restart the Rails server and view the result by visiting http://localhost:4001/login. Then, log in to your app with the credentials you used to sign up.&quot;}]},{&quot;heading&quot;:&quot;Log out functionality&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_5_0&quot;,&quot;text&quot;:&quot;In the Sessions controller, make an action named `destroy`. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-logout\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.\n&quot;},{&quot;key&quot;:&quot;Newstand_5_1&quot;,&quot;text&quot;:&quot;In the routes file, map DELETE requests for the url /logout to the Sessions controller&#x27;s `destroy` action.&quot;}]},{&quot;heading&quot;:&quot;Require logged in users&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_6_0&quot;,&quot;text&quot;:&quot;The signup, login, and logout functionalities are now complete. However, there&#x27;s still a problem: anyone, even logged out users, can view individual articles. Let&#x27;s make sure the app requires users to be logged in to read individual articles.\n\nTo start, in the Application controller, set up the methods `current_user`, `require_user`, and `helper_method`. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-current-user\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.&quot;},{&quot;key&quot;:&quot;Newstand_6_1&quot;,&quot;text&quot;:&quot;In the Articles controller, use the `before_action` command to require users to be logged in for all actions except the `index` action. Check out \u003Ca href=\&quot;http://guides.rubyonrails.org/action_controller_overview.html#filters\&quot; target=\&quot;_blank\&quot;\u003Ethis page\u003C/a\u003E for more information on \u003Ccode\u003Ebefore_action\u003C/code\u003E.\u003C/a\u003E&quot;},{&quot;key&quot;:&quot;Newstand_6_2&quot;,&quot;text&quot;:&quot;In **app/views/layouts/application.html.erb** under line 20, use `current_user` to update the nav items depending on whether the user is logged in:\n* If a user is logged in, show the user&#x27;s email and a \&quot;Log out\&quot; link\n* If a user is logged out, show a \&quot;Sign up\&quot; link and a \&quot;Log in\&quot; link\n\nAdapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-filters\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.&quot;},{&quot;key&quot;:&quot;Newstand_6_3&quot;,&quot;text&quot;:&quot;Restart the Rails server and visit http://localhost:4001.\n* First log out of the app.\n* Then visit http://localhost:4001/. You should be able to access it even though you&#x27;re logged out.\n* Next visit http://localhost:4001/articles/1. Since the articles show page requires users to be logged in, you should be redirected to the login page.\n* Log in to the application. Now visit http://localhost:4001/articles/1. You should now be able to see it.&quot;}]},{&quot;heading&quot;:&quot;Challenges&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_7_0&quot;,&quot;text&quot;:&quot;There are a few more things that you can add to your authentication system to make it more complete:\n1. After a user is logged in, she shouldn&#x27;t be able to see the signup page (http://localhost:4001/signup) or the login page (http://localhost:4001/login). Instead if she tries to visit either page, she should get redirected to the articles index page (http://localhost:4001/). Similar to how we required logged in users to view individual articles, require logged out users to view the signup and login pages.\n2. Add a profile page that shows the current user&#x27;s first name, last name and email. Require that a user be logged in to access the profile page. Also, update the nav items to show a \&quot;Profile\&quot; link if a user is logged in.\n3. Let a logged in user modify her profile page. In other words, let the current user edit and update her first name, last name, and email through the profile page.&quot;}]}],&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth_newstand&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;}},&quot;uuid&quot;:&quot;d851d1b975791e3516d1a8873118ab7b&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/projects/rails-auth_newstand-1.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/projects/rails-auth_newstand-1&quot;,&quot;unit_slug&quot;:&quot;authentication&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;lessons&quot;:{&quot;authentication&quot;:{&quot;node_type&quot;:&quot;lesson&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;description&quot;:&quot;Build a system to let users sign up, log in, and log out of your app.&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/authentication&quot;,&quot;exercises&quot;:{&quot;authentication-authentication&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-authentication&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[{&quot;filename&quot;:&quot;app/controllers/albums_controller.rb&quot;}],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;whitelist&quot;:[{&quot;matcher&quot;:&quot;^bundle install&quot;,&quot;fakeresponse&quot;:{&quot;output&quot;:&quot;Using rake 10.4.2\nUsing i18n 0.7.0\nUsing json 1.8.2\nUsing minitest 5.6.0\nUsing thread_safe 0.3.5\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing rack 1.5.2\nUsing mime-types 1.25.1\nUsing polyglot 0.3.5\nUsing arel 5.0.1.20140414130214\nUsing coffee-script-source 1.9.1.1\nUsing execjs 2.5.2\nUsing thor 0.19.1\nUsing diff-lcs 1.2.5\nUsing hike 1.2.3\nUsing multi_json 1.11.0\nUsing mini_portile 0.6.2\nUsing bundler 1.14.4\nUsing tilt 1.4.1\nUsing rspec-support 3.1.2\nUsing rspec-context-private 0.0.1\nUsing sass 3.2.19\nUsing sqlite3 1.3.9\nUsing rdoc 4.2.0\nUsing tzinfo 1.2.2\nUsing rack-test 0.6.3\nUsing treetop 1.4.15\nUsing coffee-script 2.4.1\nUsing uglifier 1.3.0\nUsing nokogiri 1.6.6.2\nUsing sprockets 2.11.0\nUsing rspec-core 3.1.7\nUsing rspec-expectations 3.1.2\nUsing rspec-mocks 3.1.3\nUsing sdoc 0.4.0\nUsing activesupport 4.1.1\nUsing mail 2.5.4\nUsing rspec 3.1.0\nUsing actionview 4.1.1\nUsing activemodel 4.1.1\nUsing jbuilder 2.2.2\nUsing rspec-html-matchers 0.6.1\nUsing actionpack 4.1.1\nUsing activerecord 4.1.1\nUsing actionmailer 4.1.1\nUsing railties 4.1.1\nUsing sprockets-rails 2.2.4\nUsing coffee-rails 4.0.0\nUsing jquery-rails 3.1.2\nUsing rspec-rails 3.1.0\nUsing rails 4.1.1\nUsing sass-rails 4.0.3\nUsing turbolinks 2.4.0\nBundle complete! 13 Gemfile dependencies, 54 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.&quot;,&quot;type&quot;:&quot;stdout&quot;,&quot;delay&quot;:0}},{&quot;matcher&quot;:&quot;rails\\s*(s|server)&quot;,&quot;fakeresponse&quot;:{&quot;output&quot;:&quot;=\u003E Booting WEBrick\n=\u003E Rails 4.1.1 application starting in development on http://0.0.0.0:8000\n=\u003E Run `rails server -h` for more startup options\n=\u003E Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)\n=\u003E Ctrl-C to shutdown server\n[2017-02-13 11:49:22] INFO  WEBrick 1.3.1\n[2017-02-13 11:49:22] INFO  ruby 2.3.0 (2015-12-25) [x86_64-darwin14]\n[2017-02-13 11:49:22] INFO  WEBrick::HTTPServer#start: pid=45871 port=2231&quot;,&quot;type&quot;:&quot;stdout&quot;,&quot;delay&quot;:0}}],&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;localhost:8000/&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Many web apps let users sign up for a new account and log in and out of their accounts. Together, signing up, logging in and logging out make up an authentication system.\n\nLet&#x27;s create an authentication system for a photosharing website built with Ruby on Rails.\n\nIf you&#x27;re new to Rails, we recommend you do \u003Ca href=\&quot;https://www.codecademy.com/learn/learn-rails\&quot; target=\&quot;_blank\&quot;\u003Ethis course\u003C/a\u003E first.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint({\n  instructions: &#x27;We\\&#x27;ve provided a Rails app to get you started. Let\\&#x27;s take a look - first install the gems in the **Gemfile**.\\n\\n```\\n$ bundle install \\n```&#x27;,\n  hint: &#x27;&#x27;\n}, function (Tests, callback)\n    {\n    Tests.componentTest(function (Components) {\n      var validCommands = [&#x27;bundle install&#x27;];\n      if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n        return { pass: true };\n      }\n      return {\n        pass: false,\n        errors: {\n          friendly: &#x27;Remember to use \\&#x27;bundle\\&#x27; to install the gems.&#x27;,\n          component: &#x27;Terminal&#x27;\n        }\n      };\n    }, callback);\n  });\ncheckpoint({\n  instructions: &#x27;Next start a Rails development server.\\n\\n```\\n$ rails server \\n```&#x27;,\n  hint: &#x27;&#x27;\n}, function (Tests, callback)\n    {\n    Tests.componentTest(function (Components) {\n      var validCommands = [\n        &#x27;rails server&#x27;,\n        &#x27;rails s&#x27;\n      ];\n      if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n        return { pass: true };\n      }\n      return {\n        pass: false,\n        errors: {\n          friendly: &#x27;Make sure to run \\&#x27;rails server\\&#x27; in the terminal.&#x27;,\n          component: &#x27;Terminal&#x27;\n        }\n      };\n    }, callback);\n  });\ncheckpoint({\n  instructions: &#x27;Then visit http://localhost:8000 to see a list of all albums.\\n\\nClick on an album to see the photos inside it.\\n\\nHow can we add an authentication system to this app? Click Next to learn more.&#x27;,\n  hint: &#x27;&#x27;\n}, function (Tests, callback)\n    {\n    Tests.componentTest(function (Components) {\n      if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000&#x27;)) {\n        return { pass: true };\n      }\n      return {\n        pass: false,\n        errors: {\n          friendly: &#x27;Visit http://localhost:8000 in the browser to preview the app.&#x27;,\n          component: &#x27;WebBrowser&#x27;\n        }\n      };\n    }, callback);\n  });&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-authentication.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-authentication&quot;},&quot;authentication-user-model&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-user-model&quot;,&quot;title&quot;:&quot;User model&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/3/two-turns-post.svg&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Using the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-forms\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide, here&#x27;s how authentication fits in:\n\n**Turn one:**\n1. When a user visits the signup page, the browser makes an HTTP GET request for the URL `/signup`. \n2. The Rails router maps the URL `/signup` to the Users controller&#x27;s `new` action. The `new` action handles the request and passes it on to the view. \n3. The view displays the signup form.\n\n**Turn two:**\n1. When the user fills in and submits the form, the browser sends the data via an HTTP POST request to the app.\n2. The router maps the request to the Users controller&#x27;s `create` action.\n3. The `create` action saves the data to the database and redirects to the albums page. The action also creates a new _session_.\n\nWhat is a session? A session is a connection between the user&#x27;s computer and the server running the Rails app. A session starts when a user logs in, and ends when the user logs out.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Looking at the request/response cycle, we need five parts to add signup machinery to the app: a model, a controller, routes, views, and logic for sessions. Let&#x27;s start here by creating a model.\\n\\\n\\n\\\nGenerate a model named User.\&quot;, function(Tests, callback) {\n      Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails generate model User\&quot;, \&quot;rails g model User\&quot;, \&quot;bundle exec rails generate model User\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rails generate&#x27; to create a new model.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In **app/models/user.rb**, add a method named `has_secure_password`. \\n\\\n```ruby \\n\\\nclass User \u003C ActiveRecord::Base \\n\\\n\\n\\\n  has_secure_password \\n\\\n\\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/models/user.rb\&quot;, \&quot;has_secure_password\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to add the &#x27;has_secure_password&#x27; method to the User model.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In the **Gemfile** on line 30, uncomment the `bcrypt` gem\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;Gemfile\&quot;, \&quot;gem &#x27;bcrypt&#x27;\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to add the bcrypt gem to the Gemfile.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Install the gems.\&quot;, function(Tests, callback) { \n        Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;bundle install\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;bundle&#x27; to install the gems.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n      });&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-user-model.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-user-model&quot;},&quot;authentication-user-migration&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-user-migration&quot;,&quot;title&quot;:&quot;User migration&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;What did we just do?\n\n1. We created a model named User.\n2. In the model, we used the method `has_secure_password`. This method adds functionality to save passwords securely.\n3. In order to save passwords securely, `has_secure_password` uses an algorithm called bcrypt. To use bcrypt, we added the `bcrypt` gem to the Gemfile.\n\nNow that the User model is set up, let&#x27;s continue by adding columns to the migration files. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Open the migration file in **db/migrate/** for the users table and add:\\n\\\n* a string column called `first_name`\\n\\\n* a string column called `last_name`\\n\\\n* a string column called `email`\\n\\\n* a string column called `password_digest`\&quot;, function(Tests, callback) {\n        Tests.componentTest(function(Components) { \n            if (Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :first_name/) \u0026\u0026 Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :last_name/) \u0026\u0026 Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :email/) \u0026\u0026 Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :password_digest/)) { \n              return {pass: true}; \n            }\n            return {pass: false, errors: { friendly: \&quot;Make sure the migration file has columns for first_name, last_name, email, and password_digest, all of type &#x27;string&#x27;.\&quot;, component: &#x27;PersistentCodeEditor&#x27;}}; \n          }, callback); \n      });\ncheckpoint(\&quot;Run a migration to update the database.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rake db:migrate\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rake&#x27; to run the migration.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n\n});&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-user-migration.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-user-migration&quot;},&quot;authentication-signup-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-signup-i&quot;,&quot;title&quot;:&quot;Signup I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;bash .1_4_setup.sh&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;Terminal&quot;:{&quot;whitelist&quot;:[{&quot;matcher&quot;:&quot;rails s&quot;},{&quot;matcher&quot;:&quot;rails generate controller Users&quot;,&quot;fakeresponse&quot;:{&quot;output&quot;:&quot;create  app/controllers/users_controller.rb\ninvoke  erb\ncreate    app/views/users\ninvoke  test_unit\ncreate    test/controllers/users_controller_test.rb\ninvoke  helper\ncreate    app/helpers/users_helper.rb\ninvoke    test_unit\ninvoke  assets\ninvoke    coffee\ncreate      app/assets/javascripts/users.coffee\ninvoke    scss\ncreate      app/assets/stylesheets/users.scss&quot;,&quot;type&quot;:&quot;stdout&quot;,&quot;delay&quot;:500}},{&quot;matcher&quot;:&quot;rails g controller Users&quot;}],&quot;_schema&quot;:&quot;Terminal&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Nice work! You&#x27;ve added columns to the users table and ran a migration to update the database.\n\nWhat&#x27;s the `password_digest` column for? When a user submits her password, it&#x27;s not a good idea to store that password as is in the database; if an attacker somehow gets into your database, he would be able to see all your users&#x27; passwords.\n\nOne way to defend against this is to store passwords as encrypted strings in the database. This is what the `has_secure_password` method helps with - it uses the bcrypt algorithm to securely hash a user&#x27;s password, which then gets saved in the `password_digest` column.\n\nThen when a user logs in again, `has_secure_password` will collect the password that was submitted, hash it with bcrypt, and check if it matches the hash in the database. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Now that the models are set up, let&#x27;s move on to the rest of the request/response cycle and create the controllers, routes, and views needed for the signup machinery. \\n\\\n\\n\\\nGenerate a controller named Users.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails generate controller Users\&quot;, \&quot;bundle exec rails generate controller Users\&quot;, \&quot;rails generate controller Users\&quot;, \&quot;rails g controller Users\&quot;, \&quot;rails g controller Users\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rails generate&#x27; to create a controller.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In the routes file, add these routes:\\n\\\n\\n\\\n```ruby \\n\\\nget &#x27;signup&#x27;  =\u003E &#x27;users#new&#x27; \\n\\\nresources :users \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Next, in the Users controller add the `new` action.\\n\\\n```ruby\\n\\\ndef new\\n\\\n  @user = User.new\\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Then in **app/views/users/new.html.erb**, on line 7, use `form_for` to create a form with the fields of the `@user` object.\\n\\\n\\n\\\nLook back at \u003Ca href=&#x27;http://www.codecademy.com/en/learn/learn-rails/topics/one-model/exercises/one-model-create-messages-i&#x27; target=&#x27;_blank&#x27;\u003Ethis exercise\u003C/a\u003E for an example of how to use `form_for`.\\n\\\n\\n\\\nWe&#x27;ve provided CSS in **app/assets/stylesheets/application.css**.\&quot;, function(Tests, callback) {\n  Tests.rspecTest(&#x27;spec3.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Start the Rails server.\\n\\\n\\n\\\nThen visit http://localhost:8000/signup to preview the signup page in the browser.\\n\\\n\\n\\\nThe form won&#x27;t work just yet, we&#x27;ll finish it up next.\&quot;, function(Tests, callback) {\n Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails server\&quot;, \&quot;rails s\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to run &#x27;rails server&#x27; in the terminal.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n  });&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #users\&quot; do\n      get(\&quot;/signup\&quot;).should route_to(\&quot;users#new\&quot;)\n    end\n  end\nend\n&quot;,&quot;spec3.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe &#x27;users/new&#x27;, :type =\u003E :view do\n\n  before(:all) do\n    assign(:user, User.new)\n  end\n\n  context \&quot;user form do\&quot; do\n    it \&quot;renders the form\&quot; do\n      render\n\n      expect(rendered).to have_tag(\&quot;form\&quot;, with: { method: \&quot;post\&quot;}), \&quot;Did you add a form tag?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;text\&quot;, id: \&quot;user_first_name\&quot;, name: \&quot;user[first_name]\&quot; }), \&quot;Did you add a field for the user&#x27;s first_name?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;text\&quot;, id: \&quot;user_last_name\&quot;, name: \&quot;user[last_name]\&quot; }), \&quot;Did you add a field for the user&#x27;s last_name?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: {id: \&quot;user_email\&quot;, name: \&quot;user[email]\&quot; }), \&quot;Did you add a field for the user&#x27;s email?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;password\&quot;, id: \&quot;user_password\&quot;, name: \&quot;user[password]\&quot; }), \&quot;Did you add a field for the user&#x27;s password?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;submit\&quot;, name: \&quot;commit\&quot; }), \&quot;Did you add a submit button?\&quot;\n      \n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :controller do\n  let(:controller) { UsersController.new }\n\n  before(:each) do\n    User.delete_all\n  end\n\n  context \&quot;user new action\&quot; do\n    it \&quot;should have a new action\&quot; do\n      expect(controller).to respond_to(:new), \&quot;Did you implement the new action?\&quot;\n    end\n\n    context \&quot;user new action\&quot; do\n      it \&quot;should create a new user\&quot; do\n        existing_users = User.all\n\n        get :new\n        expect(assigns(:user)).to_not be_nil, \&quot;Did you assign a user to @user?\&quot;\n        expect(existing_users).to_not include(assigns(:user)), \&quot;Did you assign a new users to @user?\&quot;\n      end\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-signup-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i&quot;},&quot;authentication-signup-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-signup-ii&quot;,&quot;title&quot;:&quot;Signup II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[{&quot;filename&quot;:&quot;app/controllers/users_controller.rb&quot;}],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great! When you visit the URL `/signup`, the browser makes a GET request for the URL. This request hits the Users controller&#x27;s `new` action, which returns a view displaying the signup page.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Next, let&#x27;s take in data submitted through the signup form and save it to the database.\\n\\\n\\n\\\nIn the Users controller, add a private method `user_params` \\n\\\n```ruby \\n\\\nprivate\\n\\\n  def user_params\\n\\\n    params.require(:user).permit(:first_name, :last_name, :email, :password)\\n\\\n  end \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Between the `new` action and the private method, add the create action \\n\\\n```ruby \\n\\\ndef create \\n\\\n  @user = User.new(user_params) \\n\\\n  if @user.save \\n\\\n    session[:user_id] = @user.id \\n\\\n    redirect_to &#x27;/&#x27; \\n\\\n  else \\n\\\n    redirect_to &#x27;/signup&#x27; \\n\\\n  end \\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec3.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Visit http://localhost:8000/signup and sign up as a new user.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/signup&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Remember to visit the signup page and sign up as a new user.\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec3.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :controller do\n  let(:controller) { UsersController.new }\n\n  before(:each) do\n    User.delete_all\n  end\n\n  context \&quot;user create action\&quot; do\n    it \&quot;should have a create action\&quot; do\n      expect(controller).to respond_to(:create), \&quot;Did you implement the create action?\&quot;\n    end\n\n    context \&quot;user create action\&quot; do\n      it \&quot;should create a new user\&quot; do\n        existing_users = User.all.to_a\n\n        post :create, user: { first_name: \&quot;chewy\&quot;, last_name: \&quot;bake\&quot;, email: \&quot;chewy@chewy.com\&quot;, password: \&quot;ywehc\&quot;, password_confirmation: \&quot;ywehc\&quot;}\n        expect(existing_users).to_not include(assigns(:user)), \&quot;Did you assign a new users to @user?\&quot;\n      end\n    end\n  end\nend\n&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :controller do\n  let(:controller) { UsersController.new }\n\n  context \&quot;Users\&quot;, private: true do\n    it \&quot;should implement user_params\&quot; do\n      expect(controller).to respond_to(:user_params), \&quot;Did you add the private method &#x27;user_params&#x27; to the Users controller?\&quot;\n    end\n\n    context \&quot;user_params()\&quot; do\n      it \&quot;should allow expected parameters\&quot; do\n        controller.params = { user: { first_name: \&quot;chew\&quot;, last_name: \&quot;baka\&quot;, email: \&quot;chewy@chewy.com\&quot;, password: \&quot;chew1\&quot;} }\n\n        expect(controller.user_params).to include(:first_name), \&quot;Does the user_params method permit a first_name parameter?\&quot;\n        expect(controller.user_params).to include(:last_name), \&quot;Does the user_params method permit a last_name parameter?\&quot;\n        expect(controller.user_params).to include(:email), \&quot;Does the user_params method permit a email parameter?\&quot;\n        expect(controller.user_params).to include(:password), \&quot;Does the user_params method permit a password parameter?\&quot;\n      end\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-signup-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-signup-ii&quot;},&quot;authentication-users&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-users&quot;,&quot;title&quot;:&quot;Users&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Nice job! Now when you fill in the signup form and submit it, the data is sent to the Rails app via a POST request. The request hits the User controller&#x27;s `create` action. The `create` action saves the data, creates a new session, and redirects to the albums page.\n\nHow is a new session created? Sessions are stored as key/value pairs. In the `create` action, the line\n\n```ruby\nsession[:user_id] = @user.id \n```\n\ncreates a new session by taking the value `@user.id` and assigning it to the key `:user_id`.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s check whether the data saved to the database using the *Rails console*. The Rails console is a useful tool to interact with Rails apps. We&#x27;ll use it here to query the database.\\n\\\n\\n\\\nStart the Rails console by running\\n\\\n```bash \\n\\\nrails console\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails console\&quot;, \&quot;rails c\&quot;];\n        if (Components.Terminal.didRunOneOf(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Use &#x27;rails console&#x27; to start the Rails console.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Retrieve all signed up users in the database by typing \\n\\\n```ruby \\n\\\nUser.all \\n\\\n``` \\n\\\nYour information should show up in the results.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;User.all\&quot;];\n        if (Components.Terminal.didRunOneOf(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you retrieve all signed up users?\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Visit http://localhost:8000/signup to sign up a few more users through the signup form. \\n\\\n\\n\\\nUse the Rails console to retrieved all signed up users again.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/signup&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you retrieve all signed up users?\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});\ncheckpoint(\&quot;Exit the Rails console by typing \\n\\\n```\\n\\\nexit \\n\\\n```.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;exit\&quot;];\n        if (Components.Terminal.didRunOneOf(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;exit&#x27; to exit the Rails console.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-users.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-users&quot;},&quot;authentication-login-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-login-i&quot;,&quot;title&quot;:&quot;Login I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;bash .1_7_setup.sh&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Now that users can sign up for a new account, let&#x27;s add the ability to log in and log out of the app. Using the request/response cycle as a guide again, here&#x27;s how logging in and logging out fits in.\n\n**Turn one:**\n1. When the user visit the login page, the browser makes a GET request for the URL `/login`. \n2. The Rails router maps the URL `/login` to the Sessions controller&#x27;s `new` action. The `new` action handles the request and passes it on to the view. \n3. The view displays the login form. \n\n**Turn two:**\n1. When the user fills in and submits the form, the browser sends the data via a POST request to the app.\n2. The router maps the request to the Sessions controller&#x27;s `create` action. \n3. The `create` action verifies that the user exists in the database. If the user exists, the `create` action logs the user in by creating a new session. Otherwise, it reloads the login page.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s begin by adding a login page. Looking at the request/response cycle, we need five parts to add login machinery to the app: a model, a controller, routes, views, and logic for sessions. As we already created the User model when building the signup page, let&#x27;s start here by creating a controller.\\n\\\n\\n\\\nGenerate a controller named Sessions.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails generate controller Sessions\&quot;, \&quot;bundle exec rails generate controller Sessions\&quot;, \&quot;rails generate controller sessions\&quot;, \&quot;rails g controller Sessions\&quot;, \&quot;rails g controller Sessions\&quot;, \&quot;rails g controller sessions\&quot;, \&quot;rails generate controller Sessions\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rails generate&#x27; to create a controller.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In the routes file, create a route that maps requests for the URL &#x27;/login&#x27; to the Sessions controller&#x27;s `new` action.\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;In the Sessions controller, add the `new` action \\n\\\n```ruby \\n\\\ndef new \\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {\n  Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Then in **app/views/sessions/new.html.erb**, on line 7, use `form_for` to create a login form: \\n\\\n\\n\\\n```ruby \\n\\\n\u003C%= form_for(:session, url: login_path) do |f| %\u003E \\n\\\n  \u003C%= f.email_field :email, :placeholder =\u003E \\\&quot;Email\\\&quot; %\u003E \\n\\\n  \u003C%= f.password_field :password, :placeholder =\u003E \\\&quot;Password\\\&quot; %\u003E \\n\\\n  \u003C%= f.submit \\\&quot;Log in\\\&quot;, class: \\\&quot;btn-submit\\\&quot; %\u003E\\n\\\n\u003C% end %\u003E``` \\n\\\nWe&#x27;ve also provided CSS in **app/assets/css/application.css**.\&quot;, function(Tests, callback) {\n  Tests.rspecTest(&#x27;spec3.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Restart the Rails server and visit http://localhost:8000/login in the browser.\\n\\\n\\n\\\nThe form won&#x27;t work just yet. We&#x27;ll finish it up next.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/login&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the correct URL in the browser?\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #sessions\&quot; do\n      get(\&quot;/login\&quot;).should route_to(\&quot;sessions#new\&quot;)\n    end\n  end\nend&quot;,&quot;spec3.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe &#x27;sessions/new&#x27;, :type =\u003E :view do\n  context \&quot;login form do\&quot; do\n    it \&quot;renders the form\&quot; do\n      render\n\n      expect(rendered).to have_tag(\&quot;form\&quot;, with: { method: \&quot;post\&quot;}), \&quot;Did you add a form tag?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;email\&quot;, id: \&quot;session_email\&quot;}), \&quot;Did you add a field for email?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;password\&quot;, id: \&quot;session_password\&quot;}), \&quot;Did you add a field for password?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;submit\&quot;}), \&quot;Did you add a submit button?\&quot;\n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :controller do\n  let(:controller) { SessionsController.new }\n\n  context \&quot;session new action\&quot; do\n    it \&quot;should have a new action\&quot; do\n      expect(controller).to respond_to(:new), \&quot;Did you implement the new action?\&quot;\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-login-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-login-i&quot;},&quot;authentication-login-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-login-ii&quot;,&quot;title&quot;:&quot;Login II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Well done! \n\n1. When you visit the URL `/login`, the browser makes a GET request for the URL. This request hits the Sessions controller&#x27;s `new` action, which returns a view displaying the login page.\n2. In the login form, we use `form_for(:session, url: login_path) do |f|`. This refers to the name of the resource and corresponding URL. In the signup form, we used `form_for(@user) do |f|` since we had a User model. For the login form, we don&#x27;t have a Session model, so we refer to the parameters above. \n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Next, let&#x27;s take in data submitted through the form and log the user in by starting a new session. \\n\\\n\\n\\\nIn the routes file, create a route that maps the URL &#x27;/login&#x27; to the Sessions controller&#x27;s `create` action.\\n\\\n\\n\\\n```ruby \\n\\\npost &#x27;login&#x27; =\u003E &#x27;sessions#create&#x27;\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;In the Sessions controller, add the `create` action \\n\\\n```ruby\\n\\\ndef create\\n\\\n  @user = User.find_by_email(params[:session][:email])\\n\\\n  if @user \u0026\u0026 @user.authenticate(params[:session][:password])\\n\\\n    session[:user_id] = @user.id\\n\\\n    redirect_to &#x27;/&#x27;\\n\\\n  else\\n\\\n    redirect_to &#x27;login&#x27;\\n\\\n  end \\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Visit http://localhost:8000/login and log in with your email and password.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/login&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the login page and log in with your email and password?\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #sessions\&quot; do\n      post(\&quot;/login\&quot;).should route_to(\&quot;sessions#create\&quot;)\n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :controller do\n  let(:controller) { SessionsController.new }\n\n  context \&quot;user create action\&quot; do\n    it \&quot;should have a create action\&quot; do\n      expect(controller).to respond_to(:create), \&quot;Did you implement the create action?\&quot;\n    end\n\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-login-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-login-ii&quot;},&quot;authentication-logout&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-logout&quot;,&quot;title&quot;:&quot;Logout&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Nice job! Now when you fill in the login form and submit it, the data is sent to the Rails app via a POST request. The request hits the Sessions controller&#x27;s `create` action. The `create` action checks whether your email and password exist in the database, creates a new session, and redirects to the albums page.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Now that users can log in, let&#x27;s add the ability to log out.\\n\\\n\\n\\\nIn the routes file, create a route that maps the URL `/logout` to the Sessions controller&#x27;s `destroy` action: \\n\\\n```ruby \\n\\\ndelete &#x27;logout&#x27; =\u003E &#x27;sessions#destroy&#x27; \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;In the Session controller, add the `destroy` action by setting the session hash to nil and redirecting to the root path \\n\\\n```ruby \\n\\\ndef destroy \\n\\\n  session[:user_id] = nil \\n\\\n  redirect_to &#x27;/&#x27; \\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {\nTests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #sessions\&quot; do\n      delete(\&quot;/logout\&quot;).should route_to(\&quot;sessions#destroy\&quot;)\n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :controller do\n  let(:controller) { SessionsController.new }\n\n  context \&quot;session destroy action\&quot; do\n    it \&quot;should have a destroy action\&quot; do\n      expect(controller).to respond_to(:destroy), \&quot;Did you implement the destroy action?\&quot;\n    end\n\n    it \&quot;should remove user id from session\&quot; do\n      session[:user_id] = 1\n\n      response =  post :destroy\n      expect(session[:user_id]).to be(nil)\n      expect(response).to redirect_to(&#x27;/&#x27;)\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-logout.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-logout&quot;},&quot;authentication-current-user&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-current-user&quot;,&quot;title&quot;:&quot;current_user&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great work so far! We&#x27;ve built an authentication system that lets new users sign up for the site, and lets existing users log in and out.\n\nHowever, there&#x27;s one problem - even after you log out, you can still access the albums page. Why does this happen? Let&#x27;s look at the request/response cycle:\n\n1. Currently when a user visits the URL /albums, the browser first makes a request for that URL.\n2. The request hits the Rails router.\n3. The router sends the request to the Albums controller&#x27;s `index` action *regardless of whether a user is logged in*.\n\nWhat we want instead is for only users who are logged in to see the albums page; otherwise they should be redirected to the login page. This means that we need to check whether a user is logged in before sending her request on to the Albums controller&#x27;s `index` action. Let&#x27;s see how to do this.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In **app/controllers/application_controller.rb**, add a method named `current_user` \\n\\\n```\\n\\\nhelper_method :current_user \\n\\\n\\n\\\ndef current_user \\n\\\n  @current_user ||= User.find(session[:user_id]) if session[:user_id] \\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {             \nTests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Below `current_user`, add another method named `require_user`: \\n\\\n```ruby \\n\\\ndef require_user \\n\\\n  redirect_to &#x27;/login&#x27; unless current_user \\n\\\nend  \\n\\\n``` \\n\\\n\\n\\\n\&quot;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n      if (Components.CodeEditor.codeContains(\&quot;app/controllers/application_controller.rb\&quot;, /\\s?redirect_to\\s&#x27;\\/login&#x27;\\sunless\\scurrent_user/)) {\n         return {pass: true};\n      }\n      return {pass: false, errors: { friendly: \&quot;Did you add the require_user method?\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n });&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe ApplicationController, :type =\u003E :controller do\n   controller do\n    def index\n      current_user\n      render nothing: true\n    end\n  end\n\n  before(:each) do\n    User.delete_all\n  end\n\n  context \&quot;current_user action\&quot; do\n    context \&quot;user create action\&quot; do\n      it \&quot;current_user\&quot; do\n      u = User.create(email: \&quot;test\&quot;, password: \&quot;test\&quot;, password_confirmation: \&quot;test\&quot;)\n      session[:user_id] = u.id\n\n      get :index\n      expect(assigns(:current_user).id).to be(u.id)\n      end\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-current-user.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-current-user&quot;},&quot;authentication-filters&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-filters&quot;,&quot;title&quot;:&quot;Filters&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;How do these methods work?\n\n1. The `current_user` method determines whether a user is logged in or logged out. It does this by checking whether there&#x27;s a user in the database with a given session id. If there is, this means the user is logged in and `@current_user` will store that user; otherwise the user is logged out and `@current_user` will be `nil`.\n2. The line `helper_method :current_user` makes `current_user` method available in the views. By default, all methods defined in Application Controller are already available in the controllers.   \n3. The `require_user` method uses the `current_user` method to redirect logged out users to the login page.\n\nHere&#x27;s more on the \u003Ca href=\&quot;http://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby\&quot; target=\&quot;_blank\&quot;\u003E||= syntax\u003C/a\u003E.\nHere&#x27;s more on the \u003Ca href=\&quot;https://signalvnoise.com/posts/2699-making-sense-with-rubys-unless\&quot; target=\&quot;_blank\&quot;\u003E`unless` keyword\u003C/a\u003E.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s use `require_user` in the Albums controller in order prevent logged out users from accessing these pages. In the Albums controller, add this as the first line inside the class: \\n\\\n```ruby \\n\\\nbefore_action :require_user, only: [:index, :show]``` \\n\\\n\\n\\\nThe `before_action` command calls the `require_user` method before running the index or show actions.\&quot;, function(Tests, callback) {\n   Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/controllers/albums_controller.rb\&quot;, \&quot;before_action :require_user, only: \\\\[:index, :show\\\\]\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you add the before action :require_user?\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n\n});\ncheckpoint(\&quot;Let&#x27;s use `current_user` in application layout to update the nav items depending on whether a user is logged in or out. In **app/views/layouts/application.html.erb**, within `\u003Cdiv class=\\\&quot;nav pull-right\\\&quot;\u003E` on line 21 add: \\n\\\n```html \\n\\\n\u003C% if current_user %\u003E \\n\\\n  \u003Cul\u003E \\n\\\n    \u003Cli\u003E\u003C%= current_user.email %\u003E\u003C/li\u003E \\n\\\n    \u003Cli\u003E\u003C%= link_to \\\&quot;Log out\\\&quot;, logout_path, method: \\\&quot;delete\\\&quot; %\u003E\u003C/li\u003E \\n\\\n  \u003C/ul\u003E \\n\\\n\u003C% else %\u003E \\n\\\n  \u003Cul\u003E \\n\\\n    \u003Cli\u003E\u003C%= link_to \\\&quot;Login\\\&quot;, &#x27;login&#x27; %\u003E\u003C/a\u003E\u003C/li\u003E \\n\\\n    \u003Cli\u003E\u003C%= link_to \\\&quot;Signup\\\&quot;, &#x27;signup&#x27; %\u003E\u003C/a\u003E\u003C/li\u003E \\n\\\n  \u003C/ul\u003E \\n\\\n\u003C% end %\u003E \\n\\\n```\&quot;, function(Tests, callback) {\nTests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Log out of the app, and then visit http://localhost:8000/albums in the browser. You should be be redirected to the login page.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/albums&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the correct page in the browser?\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});\ncheckpoint(\&quot;Log in to the app with your email and password, and then visit http://localhost:8000/albums. You should now be able to access it.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/albums&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the correct page in the browser?\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;rails_helper&#x27;\nrequire &#x27;spec_helper&#x27;\n\ndescribe &#x27;layouts/application.html.erb&#x27;, :type =\u003E :view do\n\n  context \&quot;Check if user signed in\&quot; do\n    it \&quot;renders the user name\&quot; do\n\n      controller.singleton_class.class_eval do\n        def current_user\n          User.new(:first_name =\u003E \&quot;fakeuser\&quot;, :last_name =\u003E \&quot;fake\&quot;, :email =\u003E \&quot;testuser@fake.com\&quot;, :password =\u003E \&quot;password\&quot;)\n        end\n        helper_method :current_user\n      end\n\n      render\n      expect(rendered).to include(\&quot;testuser@fake.com\&quot;), \&quot;Did you output the user&#x27;s email.\&quot;\n      expect(rendered).not_to include(\&quot;Login\&quot;), \&quot;You should not output login if user is signed in.\&quot;\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-filters.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-filters&quot;},&quot;authentication-generalizations&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-generalizations&quot;,&quot;title&quot;:&quot;Generalizations&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Congratulations! You built an authentication system from scratch. What can we generalize so far?\n\n* An authentication system is made up of sign up, log in, log out functionality.\n* The `password_digest` column and `has_secure_password` method are provided by bcrypt to store passwords securely. \n* A *session* begins when a users logs in, and ends when a user logs out. \n* The `current_user` method allow us to access the current user; `require_user` redirects to the root of the app if there is no such user. \n* Before actions act as filters. They call methods before executing controller actions. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-generalizations.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-generalizations&quot;}},&quot;uuid&quot;:&quot;7dc579b095e13621bff55e1dad689622&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/authentication.en.yml&quot;,&quot;exercises_order&quot;:[&quot;authentication-authentication&quot;,&quot;authentication-user-model&quot;,&quot;authentication-user-migration&quot;,&quot;authentication-signup-i&quot;,&quot;authentication-signup-ii&quot;,&quot;authentication-users&quot;,&quot;authentication-login-i&quot;,&quot;authentication-login-ii&quot;,&quot;authentication-logout&quot;,&quot;authentication-current-user&quot;,&quot;authentication-filters&quot;,&quot;authentication-generalizations&quot;],&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/resume&quot;,&quot;unit_slug&quot;:&quot;authentication&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/authentication.en.yml&quot;,&quot;lessons_order&quot;:[&quot;authentication&quot;],&quot;projects_order&quot;:[&quot;rails-auth_newstand-1&quot;],&quot;quizzes&quot;:{&quot;rails-auth-quiz-1&quot;:{&quot;node_type&quot;:&quot;quiz&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;rails-auth-quiz-1&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;questions&quot;:[{&quot;question&quot;:{&quot;text&quot;:&quot;How does a Rails server get initialized from the command line?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;rails server&quot;},{&quot;text&quot;:&quot;rails &quot;},{&quot;text&quot;:&quot;rails init server&quot;},{&quot;text&quot;:&quot;There is no command line command to initialize a Rails server.&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;070c56cdbdcd261e076bbc785a7df78c&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What is a \&quot;session\&quot;?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;An always-open connection between the Rails app and the domain hosting service like GoDaddy or AWS.&quot;},{&quot;text&quot;:&quot;A visit to a new page within the Rails app.&quot;},{&quot;text&quot;:&quot;A connection between the user and the gem that authenticates login information.&quot;},{&quot;text&quot;:&quot;A connection between the user&#x27;s computer and server running the Rails app. It opens on successful login and closes when the user logs out.&quot;}],&quot;correct_index&quot;:4,&quot;uuid&quot;:&quot;7adfd2c80912972fd3e66936139cc8f2&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;Which of these files would be the best location for the &#x27;has_secure_password&#x27; method?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;class User \u003C ActiveRecord::Base \n\n  has_secure_password \n\nend&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;app/models/user.rb&quot;},{&quot;text&quot;:&quot;app/controllers/application_controller.rb&quot;},{&quot;text&quot;:&quot;app/helpers/authentication.rb&quot;},{&quot;text&quot;:&quot;app/db/schema.rb&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;cb0d4b223362f9ec8b9715f7cd0e82b4&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What is the correct syntax to add a column called &#x27;first_name&#x27; to the user migration table?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;class CreateUsers \u003C ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n\n    end\n  end&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;t string first_name&quot;},{&quot;text&quot;:&quot;t.string first_name&quot;},{&quot;text&quot;:&quot;t.string :first_name&quot;},{&quot;text&quot;:&quot;t.string \&quot;first_name\&quot;&quot;}],&quot;correct_index&quot;:3,&quot;uuid&quot;:&quot;1eefe4de1ad104bc24e8445a13d69f46&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What is the best way to secure users&#x27; passwords in the event your app database gets hacked?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;Require all passwords to be minimum length of 8 characters.&quot;},{&quot;text&quot;:&quot;Never store passwords in an app - store them in a remote database.&quot;},{&quot;text&quot;:&quot;Store passwords as encrypted strings in the database using the has_secure_password method.&quot;},{&quot;text&quot;:&quot;Require passwords to entered twice upon login.&quot;}],&quot;correct_index&quot;:3,&quot;uuid&quot;:&quot;fba6d57e93e69b8ab42b2d4a8f3a1f01&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;Put these steps in order: what happens when a user visits your /signup page?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;1. The /signup request hits the User controller&#x27;s #new action.\n2. The browser makes a GET request for the /signup url\n3. The browser displays the signup page.&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;1, 2, 3&quot;},{&quot;text&quot;:&quot;2, 1, 3&quot;},{&quot;text&quot;:&quot;3, 2, 1&quot;},{&quot;text&quot;:&quot;3, 1, 2&quot;}],&quot;correct_index&quot;:2,&quot;uuid&quot;:&quot;fb92ace3d8f1231f7a5432ad657391c2&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What is the correct way to order the components of the user_params method?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;private\n  def user_params\n  ... \n  end&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;params.require(:user).permit(:first_name, :last_name, :email, :password)&quot;},{&quot;text&quot;:&quot;params.require(:user, :email, :password).permit(:first_name, :last_name)&quot;},{&quot;text&quot;:&quot;User.params.require(:first_name, :last_name, :email, :password)&quot;},{&quot;text&quot;:&quot;params.require(:user, :password).permit(:first_name, :last_name, :email)&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;4361ed290885af34142d654ede6a5528&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What does this code do?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;session[:user_id] = @user.id&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;The code overwrite the existing user_id with a new user id.&quot;},{&quot;text&quot;:&quot;The code stores a new session as a hash by taking the value @user_id and assigning it to the key :user_id.&quot;},{&quot;text&quot;:&quot;It changes the user_id to an instance variable.&quot;},{&quot;text&quot;:&quot;It ends a session by changing the ownership from an old user to a new user through user_id.&quot;}],&quot;correct_index&quot;:2,&quot;uuid&quot;:&quot;3ee1528faaab16f988436603b4390a06&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;How is a new session created in Rails?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;Sessions are stored automatically as key-value pairs assigned to the value @user_id&quot;},{&quot;text&quot;:&quot;Sessions are randomly assigned as the :user_id attribute of the User model.&quot;},{&quot;text&quot;:&quot;Sessions are created and stored by the server when a user initiates a GET request.&quot;},{&quot;text&quot;:&quot;Sessions begin automatically when the user signs up for the website and end when they delete their account.&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;8185364519102878ead0bebe2ef457b6&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;Put these steps in order: what happens when a user enters their username and password and hits \&quot;Log In\&quot;?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;1. The `create` action verifies the user exists in the database.\n2. The router maps the request to the `create` action.\n3. The app determines if the user exists or not. If they do, they are sent to the homepage. If not, the sign in page reloads.\n4. The browser sends the data via POST request to the app.&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;2,1,3,4&quot;},{&quot;text&quot;:&quot;1,2,3,4&quot;},{&quot;text&quot;:&quot;4,2,1,3&quot;},{&quot;text&quot;:&quot;4,1,2,3&quot;}],&quot;correct_index&quot;:3,&quot;uuid&quot;:&quot;9c19573bb0b743f11bd12d36aea774d4&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What is the correct syntax to create a route that maps a url &#x27;/login&#x27; request to a Sessions controller&#x27;s #new action?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;get &#x27;login&#x27; =\u003E &#x27;sessions#new&#x27;&quot;},{&quot;text&quot;:&quot;get &#x27;/login&#x27; =\u003E &#x27;users#new&#x27;&quot;},{&quot;text&quot;:&quot;post &#x27;login&#x27; =\u003E &#x27;sessions#new&#x27;&quot;},{&quot;text&quot;:&quot;post &#x27;login&#x27; =\u003E &#x27;sessions#create&#x27;&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;a082cf2434dd7e87b648918988695ef4&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;Fill in the blanks:&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;def create\n  @user = User.find_by_email(params[:session][:email])\n      ... \n        session[:user_id] = @user.id\n        redirect_to &#x27;/&#x27;\n      else\n        redirect_to &#x27;login&#x27;\n     end \nend&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;if @user&quot;},{&quot;text&quot;:&quot;if @user.authenticate(params[:session][:password])&quot;},{&quot;text&quot;:&quot;if @user.email&quot;},{&quot;text&quot;:&quot;if @user \u0026\u0026 @user.authenticate(params[:session][:password])&quot;}],&quot;correct_index&quot;:4,&quot;uuid&quot;:&quot;a7cae120e456ff93d6fe2cf472710280&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;When a user initiates the /logout route, the app maps to the Session controller&#x27;s destroy action. Then what?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;The Sessions controller sets the session hash to nil and redirects to the root path.&quot;},{&quot;text&quot;:&quot;The Sessions controller initiates the destroy method, which redirects to the &#x27;.login&#x27; path.&quot;},{&quot;text&quot;:&quot;The Session controller sets the session hash to &#x27;destroy&#x27; and redirects to the login path.&quot;},{&quot;text&quot;:&quot;The Session controller destroys the User account and redirects to the root path.&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;c15c1b835d670c9a160a08aa6e74c7ca&quot;}],&quot;uuid&quot;:&quot;b2845be24995a4cae74d01612ac98153&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/quizs/rails-auth-quiz-1.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/units/authentication/quizzes/rails-auth-quiz-1&quot;,&quot;unit_slug&quot;:&quot;authentication&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;quizzes_order&quot;:[&quot;rails-auth-quiz-1&quot;]},&quot;authorization&quot;:{&quot;node_type&quot;:&quot;unit&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;projects&quot;:{&quot;rails-auth_newstand-2&quot;:{&quot;node_type&quot;:&quot;project&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;rails-auth_newstand-2&quot;,&quot;title&quot;:&quot;Newstand 2&quot;,&quot;description&quot;:&quot;In this project, you\u2019ll continue to work on Newstand to add a role based authorization system.&quot;,&quot;thumbnail_url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/project_thumbnails/rails-auth/newstand-2.jpg&quot;,&quot;preview_url&quot;:&quot;https://infinite-stream-5328.herokuapp.com/&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/rails-authnewstand-2&quot;,&quot;objective&quot;:&quot;Newstand wants to add an authorization system to their news app where users who have an \&quot;author\&quot; role can edit and delete articles in their news app.\n\nUsing the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-dynamic\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide, there are 10 changes to be made.&quot;,&quot;meta&quot;:{&quot;authors&quot;:[&quot;BanaKM&quot;]},&quot;self_assessments&quot;:[{&quot;tasks&quot;:[{&quot;key&quot;:&quot;rails-auth_newstand-2_0_10&quot;,&quot;text&quot;:&quot;Continue building the Newstand project, which you \u003Ca href=\&quot;https://www.codecademy.com/en/practice/rails-auth/topics/authentication/projects/rails-auth_newstand-1\&quot; target=\&quot;_blank\&quot;\u003Estarted here\u003C/a\u003E. Start a Rails server to preview the app in the browser. In the terminal, type:\n\n```bash\n$ rails server -p 4001\n```\n\nThis command starts a Rails server listening on port 4001. &quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_0&quot;,&quot;text&quot;:&quot;To create an authorization system based on roles, let&#x27;s start by adding a \&quot;role\&quot; column to the users table. The users table already exists in the database, so modify it using this command:\n\n```bash\n$ rails generate migration AddRoleToUsers role:string\n```\n\nThis command generates a new migration file in **db/migrate/**. The name of the migration file starts with the timestamp of when it was created, followed by **add_role_to_users.rb**. Open this migration file in **db/migrate** to see what it looks like. The migration file has a statement to add a new string column named `role` to the users table.\n\nCheck out \u003Ca href=\&quot;http://guides.rubyonrails.org/active_record_migrations.html#creating-a-standalone-migration\&quot; target=\&quot;_blank\&quot;\u003Ethis page\u003C/a\u003E for more information on modifying a table by creating a standalone migration.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_1&quot;,&quot;text&quot;:&quot;Run the migration to update the users table with the new \&quot;role\&quot; column.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_2&quot;,&quot;text&quot;:&quot;Enter the Rails console, and create a new user with the role of \&quot;author\&quot; using the `create` method. \n\nCheck out \u003Ca href=\&quot;http://guides.rubyonrails.org/active_record_basics.html#create\&quot; target=\&quot;_blank\&quot;\u003Ethis page\u003C/a\u003E for an example of how to use the `create` command.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_3&quot;,&quot;text&quot;:&quot;In the User model, add a method named `author?` that determines whether a user as an author role on the site.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_4&quot;,&quot;text&quot;:&quot;Close and re-enter the Rails console, and confirm that you can use the `author?` method to check whether a user has an author role. Find the new user you added in **db/seeds.rb** and use `author?` to check whether that user has an author role.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_5&quot;,&quot;text&quot;:&quot;In the Application controller, add a method named `require_author`.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_6&quot;,&quot;text&quot;:&quot;In the Articles controller, create a before action that calls the `require_author` method before running the `edit`, `update`, or `destroy` actions.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_7&quot;,&quot;text&quot;:&quot;In **app/views/articles/show.html.erb**, use `author?` to display an \&quot;Edit\&quot; link and a \&quot;Delete\&quot; link only if a user is an author.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_8&quot;,&quot;text&quot;:&quot;Start a Rails server to preview the app in the browser. In the terminal, type:\n\n```bash\n$ rails s -p 4001 -b 0.0.0.0\n```\n\nThis command starts a Rails server listening on port 4001. &quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_9&quot;,&quot;text&quot;:&quot;Then visit http://localhost:4001 to see your app in the browser. To make sure the authorization system is working:\n* Log in as a user who isn&#x27;t an author, and visit http://localhost:3005/articles/1. The \&quot;Edit\&quot; and \&quot;Delete\&quot; links shouldn&#x27;t be visibile.\n* Log in as a user who is an author, and visit http://localhost:3005/articles/1. Now the \&quot;Edit\&quot; and \&quot;Delete\&quot; links should be visible.&quot;}]}],&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth_newstand&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;}},&quot;uuid&quot;:&quot;ae6da4601221e9a28afb38ec39ae3f3f&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/projects/rails-auth_newstand-2.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/projects/rails-auth_newstand-2&quot;,&quot;unit_slug&quot;:&quot;authorization&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;lessons&quot;:{&quot;authorization&quot;:{&quot;node_type&quot;:&quot;lesson&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;description&quot;:&quot;Give specific users permission to access certain parts of your app.&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/authorization&quot;,&quot;exercises&quot;:{&quot;authorization-authorization&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-authorization&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;whitelist&quot;:[{&quot;matcher&quot;:&quot;^bundle install&quot;},{&quot;matcher&quot;:&quot;rails s&quot;},{&quot;matcher&quot;:&quot;rails server&quot;}],&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;So far we&#x27;ve seen how to build an authentication system that lets users sign up, log in, and log out.\n\nIn addition to authentication, many web apps have a way to give specific users permission to access certain parts of the site. For example, a blog would give only its authors permission to access the editing and publishing parts of the site. Permissions are defined with an *authorization system*.\n\nLet&#x27;s create an authorization system for a recipe website built with Rails.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;We&#x27;ve provided a Rails app to get you started. Let&#x27;s take a look - first install the gems in the **Gemfile**.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validCommands = [\&quot;bundle install\&quot;]; \n          if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) { \n              return {pass: true}; \n          } \n          return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;bundle&#x27; to install the gems.\&quot;, component: &#x27;Terminal&#x27;}}; \n        }, callback); \n      });\ncheckpoint(\&quot;Next start a Rails development server.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validCommands = [\&quot;rails server\&quot;, \&quot;rails s\&quot;]; \n          if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) { \n              return {pass: true}; \n          } \n          return {pass: false, errors: { friendly: \&quot;Make sure to run &#x27;rails server&#x27; in the terminal.\&quot;, component: &#x27;Terminal&#x27;}}; \n        }, callback); \n      });\ncheckpoint(\&quot;Then preview the app by visiting http://localhost:8000.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validUrls = [&#x27;http://localhost:8000&#x27;]; \n          if (Components.WebBrowser.loadedOneOf(validUrls)) { \n              return {pass: true}; \n          }\n          return {pass: false, errors: { friendly: &#x27;Make sure to visit `http://localhost:8000` in the browser.&#x27;, component: &#x27;WebBrowser&#x27;}}; \n        }, callback); \n      });\ncheckpoint(\&quot;Click on \\\&quot;View Recipes\\\&quot; to see recipes inside a cuisine.\\n\\\n\\n\\\nHow can we add an authorization system to this app? Click Next to learn more.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validUrls = [&#x27;http://localhost:8000/cuisines/1&#x27;, &#x27;http://localhost:8000/cuisines/2&#x27;, &#x27;http://localhost:8000/cuisines/3&#x27;]; \n          if (Components.WebBrowser.loadedOneOf(validUrls)) { \n              return {pass: true}; \n          }\n          return {pass: false, errors: { friendly: &#x27;Click on a \&quot;View Recipes\&quot; link to see the recipes inside a cuisine.&#x27;, component: &#x27;WebBrowser&#x27;}}; \n        }, callback); \n      });&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-authorization.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-authorization&quot;},&quot;authorization-user-model&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-user-model&quot;,&quot;title&quot;:&quot;Roles&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Using the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-dynamic\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide, here&#x27;s how authorization fits in:\n1. The browser makes a request for a URL\n2. The request hits the Rails router\n3. Before the router sends the request on to the controller action, the app determines whether the user has access permission by looking at the user&#x27;s *role*.\n\nWhat is a role? A role is a way to manage what parts of a site a user has access to. A user&#x27;s role is specified in the database.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s begin building an authorization system by adding a `role` column to the users table. \\n\\\n\\n\\\nOpen the migration file for the users table in **db/migrate/**, and add the following column: \\n\\\n \\n\\\n * a `string` column called `role`\&quot;, function(Tests, callback) {\n        Tests.componentTest(function(Components) {\n            if (Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t\\.string\\s*:role/)) {\n              return {pass: true};\n            }\n            return {pass: false, errors: { friendly: \&quot;Make sure the migration file has a &#x27;role&#x27; column of type &#x27;string&#x27;.\&quot;, component: &#x27;PersistentCodeEditor&#x27;}};\n          }, callback);\n      });\ncheckpoint(\&quot;Run the migration to update the database with the users table.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rake db:migrate\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rake&#x27; to run the migration.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-user-model.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-user-model&quot;},&quot;authorization-editor-role-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-editor-role-i&quot;,&quot;title&quot;:&quot;Editor Role I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;cp db/.2_3_seeds.rb db/seeds.rb \n&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great! In the users table, we now have a column named `role` that we can use to assign different roles to users, such as \&quot;editor\&quot; or \&quot;admin\&quot;.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s add a method to the User model that will help us use the role column in our application. Within the class User, beneath the `has_secure_password` method, type \\n\\\n\\n\\\n```ruby \\n\\\ndef editor? \\n\\\n  self.role == &#x27;editor&#x27; \\n\\\nend\\n\\\n```\\n\\\n\\n\\\nWe can use this method to determine if a user has the role of editor.\&quot;, function(Tests, callback) {     Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Open **db/seeds.rb**. We\\&#x27;ve added a user named Mateo with the role &#x27;editor&#x27;. Seed the database with this data \\n\\\n```bash \\n\\\n$ rake db:seed \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rake db:seed\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to use &#x27;rake&#x27; to seed the database.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(&#x27;We should now be able to use the editor? method to check whether a user has an editor role. First, start the Rails console by running\\n\\\n```bash \\n\\\n$ rails console\\n\\\n``` \\n\\\nThen check whether Mateo is an editor \\n\\\n```bash \\n\\\n\u003E mateo = User.find_by(email: \\&#x27;mateo@email.com\\&#x27;)\\n\\\n\u003E mateo.editor?\\n\\\n```&#x27;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [/mateo\\.editor\\?/];\n        if (Components.Terminal.didRunOneOf(validCommands)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you check if Mateo is an editor?\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;editor\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a editor method\&quot; do\n       expect(user).to respond_to(:editor?), \&quot;Did you implement the editor method?\&quot;\n    end\n    it \&quot;should get role to be editor\&quot; do\n      expect(user.editor?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-editor-role-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-editor-role-i&quot;},&quot;authorization-editor-role-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-editor-role-ii&quot;,&quot;title&quot;:&quot;Editor Role II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;http://localhost:8000/login&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;We created a method named `editor?` that checks whether a user&#x27;s role is \&quot;editor\&quot;, and returns `true` or `false`. The method uses `self` to refer to the current instance of a User object.\n\nNow that we can determine whether a user has an editor role on the site, let&#x27;s add a few methods to the Application controller (**app/controllers/application_controller.rb**) to make sure that users with the editor role can access specific parts of the site.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In the Application controller (**app/controllers/application_controller.rb**), below `require_user`, add another method named `require_editor` \\n\\\n```ruby \\n\\\ndef require_editor \\n\\\n  redirect_to &#x27;/&#x27; unless current_user.editor? \\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {  Tests.rspecTest(&#x27;spec.rb&#x27;, callback);    \n});\ncheckpoint(&#x27;Next, in the Recipes controller, use another before action that uses `require_editor` to permit only users with an editor role to access the `show` and `edit` actions \\n\\\n```ruby \\n\\\nbefore_action :require_editor, only: [:show, :edit]```&#x27;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/controllers/recipes_controller.rb\&quot;, \&quot;before_action :require_editor, only: \\\\[:show, :edit\\\\]\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to add before_action require_editor to the Recipes controller\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Then in **app/views/recipes/show.html**, use the `editor?` method  to display an edit link only if a user is an editor \\n\\\n```ruby \\n\\\n\u003C% if current_user \u0026\u0026 current_user.editor? %\u003E \\n\\\n  \u003Cp class=\\\&quot;recipe-edit\\\&quot;\u003E \\n\\\n    \u003C%= link_to \\\&quot;Edit Recipe\\\&quot;, edit_recipe_path(@recipe.id) %\u003E \\n\\\n  \u003C/p\u003E \\n\\\n\u003C% end %\u003E \\n\\\n```\&quot;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/views/recipes/show.html.erb\&quot;, \&quot;if current_user \u0026\u0026 current_user\\\\.editor\\\\?\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to add an edit link that displays only if the current user is an editor.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Try it out - first log in to the app as a user without a role. Looking at **db/seeds.rb**, Julian doesn&#x27;t have an editor role, so use his email `julian@email.com` and password `Julian1` to log in. Then visit http://localhost:8000/recipes/1. You shouldn&#x27;t see the Edit link on this page.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/recipes/1&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you login with Julian&#x27;s credentials and visit http://localhost:8000/recipes/1?\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});\ncheckpoint(\&quot;Log out of the app, and then log back in as an editor. Looking at **db/seeds.rb**, Mateo has an editor role, so use his email `mateo@email.com` and password `Mateo1` to log in to the app. Then visit http://localhost:8000/recipes/1. You should see the Edit link.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/recipes/1&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you login with the editor Mateo&#x27;s credentials and visit http://localhost:8000/recipes/1\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;editor\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a editor method\&quot; do\n       expect(user).to respond_to(:editor?), \&quot;Make sure to add an editor method to the User model.\&quot;\n    end\n    it \&quot;should get role to be editor\&quot; do\n      expect(user.editor?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-editor-role-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-editor-role-ii&quot;},&quot;authorization-admin-role-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-admin-role-i&quot;,&quot;title&quot;:&quot;Admin Role I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;cp db/.2_5_seeds.rb db/seeds.rb \n&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great work! The role-based authorization system is working. Users with an editor role have permissions to see the edit page, while users without that role do not.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In the User model, add a method named `admin?` that determines whether a user has an admin role on the site.\&quot;, function(Tests, callback) {  Tests.rspecTest(&#x27;spec.rb&#x27;, callback);    \n});\ncheckpoint(\&quot;Open **db/seeds.rb**. We&#x27;ve added a user named Freida with the role `admin`.\\n\\\n\\n\\\nWe should now be able to use the `admin?` method to check whether a user has an editor role. Enter the Rails console and type: \\n\\\n```ruby \\n\\\n\u003E freida = User.find_by(email: &#x27;freida@email.com&#x27;) \\n\\\n\u003E freida.admin?\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [/freida\\.admin\\?/, /freida\\.editor\\?/];\n        if (Components.Terminal.didRunOneOf(validCommands)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you check if &#x27;freida&#x27; is an admin?\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;admin\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a admin method\&quot; do\n       expect(user).to respond_to(:admin?), \&quot;Make sure to add an admin method to the User model.\&quot;\n    end\n    it \&quot;should get role to be admin\&quot; do\n      expect(user.admin?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-admin-role-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-admin-role-i&quot;},&quot;authorization-admin-role-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-admin-role-ii&quot;,&quot;title&quot;:&quot;Admin Role II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;http://localhost:8000/login&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great job! We now have a way to determine whether a user has an admin role on the site. Let&#x27;s add a few methods to the Application controller to make sure that users with the admin role can access specific parts of the site.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In the Application controller, create a method named `require_admin`.\&quot;, function(Tests, callback) {  Tests.rspecTest(&#x27;spec.rb&#x27;, callback);    \n});\ncheckpoint(\&quot;In the Recipes controller, create a before action that calls the `require_admin` method before running the `destroy` method.\&quot;, function(Tests, callback) {\n   Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/controllers/recipes_controller.rb\&quot;, \&quot;before_action :require_admin, only: \\\\[:destroy\\\\]\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to add before_action require_admin to the Recipes controller.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n\n});\ncheckpoint(\&quot;In **app/views/recipes/show.html.erb**, use the `admin?` method to display a delete link only if a user is an admin: \\n\\\n```html \\n\\\n\u003C% if current_user \u0026\u0026 current_user.admin? %\u003E \\n\\\n  \u003Cp class=\\\&quot;recipe-delete\\\&quot;\u003E\u003C%= link_to \\\&quot;Delete\\\&quot;, recipe_path(@recipe), method: \\\&quot;delete\\\&quot; %\u003E\u003Cp\u003E \\n\\\n\u003C% end %\u003E \\n\\\n```\&quot;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/views/recipes/show.html.erb\&quot;, \&quot;if current_user \u0026\u0026 current_user\\\\.admin\\\\?\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to add a delete link that displays only if the current user is an admin.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Try it out. Sign in as Freida with the email `freida@email.com` and password `Freida1`. Then visit http://localhost:8000/recipes/1. You should see your delete link.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/recipes/1&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Remember to sign in with Freida&#x27;s credentials and visit http://localhost:8000/recipes/1.\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;admin\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a admin method\&quot; do\n       expect(user).to respond_to(:admin?), \&quot;Did you implement the admin method?\&quot;\n    end\n    it \&quot;should get role to be admin\&quot; do\n      expect(user.admin?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-admin-role-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-admin-role-ii&quot;},&quot;authorization-generalizations&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-generalizations&quot;,&quot;title&quot;:&quot;Generalizations&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Congratulations! You built a authorization system from scratch.\n\n1. The _role_ column in the User model specifies a users&#x27; role\n2. A method like `def admin?` and `def editor?` is created for business logic\n3. The `require_editor` and `require_admin` methods redirect to (\\) if the current user is not an editor or admin. \n4. The before action acts a filter, calling `require_editor` or `require_admin` before excuting controller actions. \n5. The `current_user` method can be used in the views to display links based on the signed in user&#x27;s role. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-generalizations.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-generalizations&quot;}},&quot;uuid&quot;:&quot;de82bd54b763639a4904209b9c2966ef&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/authorization.en.yml&quot;,&quot;exercises_order&quot;:[&quot;authorization-authorization&quot;,&quot;authorization-user-model&quot;,&quot;authorization-editor-role-i&quot;,&quot;authorization-editor-role-ii&quot;,&quot;authorization-admin-role-i&quot;,&quot;authorization-admin-role-ii&quot;,&quot;authorization-generalizations&quot;],&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/resume&quot;,&quot;unit_slug&quot;:&quot;authorization&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/authorization.en.yml&quot;,&quot;lessons_order&quot;:[&quot;authorization&quot;],&quot;projects_order&quot;:[&quot;rails-auth_newstand-2&quot;],&quot;quizzes&quot;:{&quot;rails-auth-quiz-2&quot;:{&quot;node_type&quot;:&quot;quiz&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;rails-auth-quiz-2&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;questions&quot;:[{&quot;question&quot;:{&quot;text&quot;:&quot;Why would an app create an authentication system?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;To give users the ability to sign up, and to login and logout of an application. &quot;},{&quot;text&quot;:&quot;To test the :user_id perameter for veracity against the @user method.&quot;},{&quot;text&quot;:&quot;To allow a registered user to save their :user_id session.&quot;},{&quot;text&quot;:&quot;All of the above.&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;79cae8e08c7d4a789ecc84b0fda341e1&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;Where is a user&#x27;s role specified?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;The User method&quot;},{&quot;text&quot;:&quot;The User controller&quot;},{&quot;text&quot;:&quot;The User model&quot;},{&quot;text&quot;:&quot;The index.html file&quot;}],&quot;correct_index&quot;:3,&quot;uuid&quot;:&quot;e9da30e0ccd85b8d2e80d43e4695c0a7&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;How would you verify if this user&#x27;s role is &#x27;editor&#x27;?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;def editor? \n  \nend&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;@user.role == &#x27;editor&#x27;&quot;},{&quot;text&quot;:&quot;self.role == &#x27;editor&#x27;&quot;},{&quot;text&quot;:&quot;role == &#x27;editor&#x27;&quot;},{&quot;text&quot;:&quot;user.role == &#x27;editor&#x27;&quot;}],&quot;correct_index&quot;:2,&quot;uuid&quot;:&quot;7e038435f478939473b931cc6e7c82ee&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;What is the correct html to display the editor link only if the user is an editor?&quot;,&quot;snippet&quot;:{&quot;code&quot;:[&quot;________________________\n  \u003Cp class=\&quot;recipe-edit\&quot;\u003E \n    \u003C%= link_to \&quot;Edit Recipe\&quot;, edit_recipe_path(@recipe.id) %\u003E \n  \u003C/p\u003E \n\u003C% end %\u003E&quot;],&quot;language&quot;:&quot;html&quot;}},&quot;answers&quot;:[{&quot;text&quot;:&quot;\u003C% if current_user \u0026\u0026 current_user.editor? %\u003E&quot;},{&quot;text&quot;:&quot;\u003C% if current_user.editor? %\u003E&quot;},{&quot;text&quot;:&quot;\u003C% if current_user \u0026\u0026 user.editor? %\u003E&quot;},{&quot;text&quot;:&quot;\u003C% if user_id.valid? \u0026\u0026 current_user.editor? %\u003E&quot;}],&quot;correct_index&quot;:1,&quot;uuid&quot;:&quot;507b0a6dc4ec8d66cf3e262891787a6f&quot;},{&quot;question&quot;:{&quot;text&quot;:&quot;If you only want admins to have delete priviledges, which code would you use?&quot;},&quot;answers&quot;:[{&quot;text&quot;:&quot;    :require_admin, only: [:destroy]&quot;},{&quot;text&quot;:&quot;before_action :require, only: [:admin, :destroy]&quot;},{&quot;text&quot;:&quot;before_action :require_admin, only: [:destroy]&quot;},{&quot;text&quot;:&quot;@admin = Admin.require[:destroy]&quot;}],&quot;correct_index&quot;:3,&quot;uuid&quot;:&quot;b470688e3cbb371aa4f00d411a9581cc&quot;}],&quot;uuid&quot;:&quot;35d135d1c7284e6027d84cfa30acb87e&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/quizs/rails-auth-quiz-2.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/units/authorization/quizzes/rails-auth-quiz-2&quot;,&quot;unit_slug&quot;:&quot;authorization&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;quizzes_order&quot;:[&quot;rails-auth-quiz-2&quot;]}},&quot;updated_at&quot;:&quot;1502301875&quot;,&quot;uuid&quot;:&quot;1e86a970500fbc262c7398715d9725b8&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/resume&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth&quot;,&quot;wip&quot;:false,&quot;units_order&quot;:[&quot;authentication&quot;,&quot;authorization&quot;],&quot;lessons&quot;:{&quot;authentication&quot;:{&quot;node_type&quot;:&quot;lesson&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;description&quot;:&quot;Build a system to let users sign up, log in, and log out of your app.&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/authentication&quot;,&quot;exercises&quot;:{&quot;authentication-authentication&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-authentication&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[{&quot;filename&quot;:&quot;app/controllers/albums_controller.rb&quot;}],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;whitelist&quot;:[{&quot;matcher&quot;:&quot;^bundle install&quot;,&quot;fakeresponse&quot;:{&quot;output&quot;:&quot;Using rake 10.4.2\nUsing i18n 0.7.0\nUsing json 1.8.2\nUsing minitest 5.6.0\nUsing thread_safe 0.3.5\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing rack 1.5.2\nUsing mime-types 1.25.1\nUsing polyglot 0.3.5\nUsing arel 5.0.1.20140414130214\nUsing coffee-script-source 1.9.1.1\nUsing execjs 2.5.2\nUsing thor 0.19.1\nUsing diff-lcs 1.2.5\nUsing hike 1.2.3\nUsing multi_json 1.11.0\nUsing mini_portile 0.6.2\nUsing bundler 1.14.4\nUsing tilt 1.4.1\nUsing rspec-support 3.1.2\nUsing rspec-context-private 0.0.1\nUsing sass 3.2.19\nUsing sqlite3 1.3.9\nUsing rdoc 4.2.0\nUsing tzinfo 1.2.2\nUsing rack-test 0.6.3\nUsing treetop 1.4.15\nUsing coffee-script 2.4.1\nUsing uglifier 1.3.0\nUsing nokogiri 1.6.6.2\nUsing sprockets 2.11.0\nUsing rspec-core 3.1.7\nUsing rspec-expectations 3.1.2\nUsing rspec-mocks 3.1.3\nUsing sdoc 0.4.0\nUsing activesupport 4.1.1\nUsing mail 2.5.4\nUsing rspec 3.1.0\nUsing actionview 4.1.1\nUsing activemodel 4.1.1\nUsing jbuilder 2.2.2\nUsing rspec-html-matchers 0.6.1\nUsing actionpack 4.1.1\nUsing activerecord 4.1.1\nUsing actionmailer 4.1.1\nUsing railties 4.1.1\nUsing sprockets-rails 2.2.4\nUsing coffee-rails 4.0.0\nUsing jquery-rails 3.1.2\nUsing rspec-rails 3.1.0\nUsing rails 4.1.1\nUsing sass-rails 4.0.3\nUsing turbolinks 2.4.0\nBundle complete! 13 Gemfile dependencies, 54 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.&quot;,&quot;type&quot;:&quot;stdout&quot;,&quot;delay&quot;:0}},{&quot;matcher&quot;:&quot;rails\\s*(s|server)&quot;,&quot;fakeresponse&quot;:{&quot;output&quot;:&quot;=\u003E Booting WEBrick\n=\u003E Rails 4.1.1 application starting in development on http://0.0.0.0:8000\n=\u003E Run `rails server -h` for more startup options\n=\u003E Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)\n=\u003E Ctrl-C to shutdown server\n[2017-02-13 11:49:22] INFO  WEBrick 1.3.1\n[2017-02-13 11:49:22] INFO  ruby 2.3.0 (2015-12-25) [x86_64-darwin14]\n[2017-02-13 11:49:22] INFO  WEBrick::HTTPServer#start: pid=45871 port=2231&quot;,&quot;type&quot;:&quot;stdout&quot;,&quot;delay&quot;:0}}],&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;localhost:8000/&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Many web apps let users sign up for a new account and log in and out of their accounts. Together, signing up, logging in and logging out make up an authentication system.\n\nLet&#x27;s create an authentication system for a photosharing website built with Ruby on Rails.\n\nIf you&#x27;re new to Rails, we recommend you do \u003Ca href=\&quot;https://www.codecademy.com/learn/learn-rails\&quot; target=\&quot;_blank\&quot;\u003Ethis course\u003C/a\u003E first.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint({\n  instructions: &#x27;We\\&#x27;ve provided a Rails app to get you started. Let\\&#x27;s take a look - first install the gems in the **Gemfile**.\\n\\n```\\n$ bundle install \\n```&#x27;,\n  hint: &#x27;&#x27;\n}, function (Tests, callback)\n    {\n    Tests.componentTest(function (Components) {\n      var validCommands = [&#x27;bundle install&#x27;];\n      if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n        return { pass: true };\n      }\n      return {\n        pass: false,\n        errors: {\n          friendly: &#x27;Remember to use \\&#x27;bundle\\&#x27; to install the gems.&#x27;,\n          component: &#x27;Terminal&#x27;\n        }\n      };\n    }, callback);\n  });\ncheckpoint({\n  instructions: &#x27;Next start a Rails development server.\\n\\n```\\n$ rails server \\n```&#x27;,\n  hint: &#x27;&#x27;\n}, function (Tests, callback)\n    {\n    Tests.componentTest(function (Components) {\n      var validCommands = [\n        &#x27;rails server&#x27;,\n        &#x27;rails s&#x27;\n      ];\n      if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n        return { pass: true };\n      }\n      return {\n        pass: false,\n        errors: {\n          friendly: &#x27;Make sure to run \\&#x27;rails server\\&#x27; in the terminal.&#x27;,\n          component: &#x27;Terminal&#x27;\n        }\n      };\n    }, callback);\n  });\ncheckpoint({\n  instructions: &#x27;Then visit http://localhost:8000 to see a list of all albums.\\n\\nClick on an album to see the photos inside it.\\n\\nHow can we add an authentication system to this app? Click Next to learn more.&#x27;,\n  hint: &#x27;&#x27;\n}, function (Tests, callback)\n    {\n    Tests.componentTest(function (Components) {\n      if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000&#x27;)) {\n        return { pass: true };\n      }\n      return {\n        pass: false,\n        errors: {\n          friendly: &#x27;Visit http://localhost:8000 in the browser to preview the app.&#x27;,\n          component: &#x27;WebBrowser&#x27;\n        }\n      };\n    }, callback);\n  });&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-authentication.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-authentication&quot;},&quot;authentication-user-model&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-user-model&quot;,&quot;title&quot;:&quot;User model&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/3/two-turns-post.svg&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Using the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-forms\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide, here&#x27;s how authentication fits in:\n\n**Turn one:**\n1. When a user visits the signup page, the browser makes an HTTP GET request for the URL `/signup`. \n2. The Rails router maps the URL `/signup` to the Users controller&#x27;s `new` action. The `new` action handles the request and passes it on to the view. \n3. The view displays the signup form.\n\n**Turn two:**\n1. When the user fills in and submits the form, the browser sends the data via an HTTP POST request to the app.\n2. The router maps the request to the Users controller&#x27;s `create` action.\n3. The `create` action saves the data to the database and redirects to the albums page. The action also creates a new _session_.\n\nWhat is a session? A session is a connection between the user&#x27;s computer and the server running the Rails app. A session starts when a user logs in, and ends when the user logs out.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Looking at the request/response cycle, we need five parts to add signup machinery to the app: a model, a controller, routes, views, and logic for sessions. Let&#x27;s start here by creating a model.\\n\\\n\\n\\\nGenerate a model named User.\&quot;, function(Tests, callback) {\n      Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails generate model User\&quot;, \&quot;rails g model User\&quot;, \&quot;bundle exec rails generate model User\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rails generate&#x27; to create a new model.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In **app/models/user.rb**, add a method named `has_secure_password`. \\n\\\n```ruby \\n\\\nclass User \u003C ActiveRecord::Base \\n\\\n\\n\\\n  has_secure_password \\n\\\n\\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/models/user.rb\&quot;, \&quot;has_secure_password\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to add the &#x27;has_secure_password&#x27; method to the User model.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In the **Gemfile** on line 30, uncomment the `bcrypt` gem\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;Gemfile\&quot;, \&quot;gem &#x27;bcrypt&#x27;\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to add the bcrypt gem to the Gemfile.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Install the gems.\&quot;, function(Tests, callback) { \n        Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;bundle install\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;bundle&#x27; to install the gems.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n      });&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-user-model.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-user-model&quot;},&quot;authentication-user-migration&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-user-migration&quot;,&quot;title&quot;:&quot;User migration&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;What did we just do?\n\n1. We created a model named User.\n2. In the model, we used the method `has_secure_password`. This method adds functionality to save passwords securely.\n3. In order to save passwords securely, `has_secure_password` uses an algorithm called bcrypt. To use bcrypt, we added the `bcrypt` gem to the Gemfile.\n\nNow that the User model is set up, let&#x27;s continue by adding columns to the migration files. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Open the migration file in **db/migrate/** for the users table and add:\\n\\\n* a string column called `first_name`\\n\\\n* a string column called `last_name`\\n\\\n* a string column called `email`\\n\\\n* a string column called `password_digest`\&quot;, function(Tests, callback) {\n        Tests.componentTest(function(Components) { \n            if (Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :first_name/) \u0026\u0026 Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :last_name/) \u0026\u0026 Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :email/) \u0026\u0026 Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t.string :password_digest/)) { \n              return {pass: true}; \n            }\n            return {pass: false, errors: { friendly: \&quot;Make sure the migration file has columns for first_name, last_name, email, and password_digest, all of type &#x27;string&#x27;.\&quot;, component: &#x27;PersistentCodeEditor&#x27;}}; \n          }, callback); \n      });\ncheckpoint(\&quot;Run a migration to update the database.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rake db:migrate\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rake&#x27; to run the migration.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n\n});&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-user-migration.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-user-migration&quot;},&quot;authentication-signup-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-signup-i&quot;,&quot;title&quot;:&quot;Signup I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;bash .1_4_setup.sh&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;Terminal&quot;:{&quot;whitelist&quot;:[{&quot;matcher&quot;:&quot;rails s&quot;},{&quot;matcher&quot;:&quot;rails generate controller Users&quot;,&quot;fakeresponse&quot;:{&quot;output&quot;:&quot;create  app/controllers/users_controller.rb\ninvoke  erb\ncreate    app/views/users\ninvoke  test_unit\ncreate    test/controllers/users_controller_test.rb\ninvoke  helper\ncreate    app/helpers/users_helper.rb\ninvoke    test_unit\ninvoke  assets\ninvoke    coffee\ncreate      app/assets/javascripts/users.coffee\ninvoke    scss\ncreate      app/assets/stylesheets/users.scss&quot;,&quot;type&quot;:&quot;stdout&quot;,&quot;delay&quot;:500}},{&quot;matcher&quot;:&quot;rails g controller Users&quot;}],&quot;_schema&quot;:&quot;Terminal&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Nice work! You&#x27;ve added columns to the users table and ran a migration to update the database.\n\nWhat&#x27;s the `password_digest` column for? When a user submits her password, it&#x27;s not a good idea to store that password as is in the database; if an attacker somehow gets into your database, he would be able to see all your users&#x27; passwords.\n\nOne way to defend against this is to store passwords as encrypted strings in the database. This is what the `has_secure_password` method helps with - it uses the bcrypt algorithm to securely hash a user&#x27;s password, which then gets saved in the `password_digest` column.\n\nThen when a user logs in again, `has_secure_password` will collect the password that was submitted, hash it with bcrypt, and check if it matches the hash in the database. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Now that the models are set up, let&#x27;s move on to the rest of the request/response cycle and create the controllers, routes, and views needed for the signup machinery. \\n\\\n\\n\\\nGenerate a controller named Users.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails generate controller Users\&quot;, \&quot;bundle exec rails generate controller Users\&quot;, \&quot;rails generate controller Users\&quot;, \&quot;rails g controller Users\&quot;, \&quot;rails g controller Users\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rails generate&#x27; to create a controller.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In the routes file, add these routes:\\n\\\n\\n\\\n```ruby \\n\\\nget &#x27;signup&#x27;  =\u003E &#x27;users#new&#x27; \\n\\\nresources :users \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Next, in the Users controller add the `new` action.\\n\\\n```ruby\\n\\\ndef new\\n\\\n  @user = User.new\\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Then in **app/views/users/new.html.erb**, on line 7, use `form_for` to create a form with the fields of the `@user` object.\\n\\\n\\n\\\nLook back at \u003Ca href=&#x27;http://www.codecademy.com/en/learn/learn-rails/topics/one-model/exercises/one-model-create-messages-i&#x27; target=&#x27;_blank&#x27;\u003Ethis exercise\u003C/a\u003E for an example of how to use `form_for`.\\n\\\n\\n\\\nWe&#x27;ve provided CSS in **app/assets/stylesheets/application.css**.\&quot;, function(Tests, callback) {\n  Tests.rspecTest(&#x27;spec3.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Start the Rails server.\\n\\\n\\n\\\nThen visit http://localhost:8000/signup to preview the signup page in the browser.\\n\\\n\\n\\\nThe form won&#x27;t work just yet, we&#x27;ll finish it up next.\&quot;, function(Tests, callback) {\n Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails server\&quot;, \&quot;rails s\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to run &#x27;rails server&#x27; in the terminal.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n  });&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #users\&quot; do\n      get(\&quot;/signup\&quot;).should route_to(\&quot;users#new\&quot;)\n    end\n  end\nend\n&quot;,&quot;spec3.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe &#x27;users/new&#x27;, :type =\u003E :view do\n\n  before(:all) do\n    assign(:user, User.new)\n  end\n\n  context \&quot;user form do\&quot; do\n    it \&quot;renders the form\&quot; do\n      render\n\n      expect(rendered).to have_tag(\&quot;form\&quot;, with: { method: \&quot;post\&quot;}), \&quot;Did you add a form tag?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;text\&quot;, id: \&quot;user_first_name\&quot;, name: \&quot;user[first_name]\&quot; }), \&quot;Did you add a field for the user&#x27;s first_name?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;text\&quot;, id: \&quot;user_last_name\&quot;, name: \&quot;user[last_name]\&quot; }), \&quot;Did you add a field for the user&#x27;s last_name?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: {id: \&quot;user_email\&quot;, name: \&quot;user[email]\&quot; }), \&quot;Did you add a field for the user&#x27;s email?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;password\&quot;, id: \&quot;user_password\&quot;, name: \&quot;user[password]\&quot; }), \&quot;Did you add a field for the user&#x27;s password?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;submit\&quot;, name: \&quot;commit\&quot; }), \&quot;Did you add a submit button?\&quot;\n      \n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :controller do\n  let(:controller) { UsersController.new }\n\n  before(:each) do\n    User.delete_all\n  end\n\n  context \&quot;user new action\&quot; do\n    it \&quot;should have a new action\&quot; do\n      expect(controller).to respond_to(:new), \&quot;Did you implement the new action?\&quot;\n    end\n\n    context \&quot;user new action\&quot; do\n      it \&quot;should create a new user\&quot; do\n        existing_users = User.all\n\n        get :new\n        expect(assigns(:user)).to_not be_nil, \&quot;Did you assign a user to @user?\&quot;\n        expect(existing_users).to_not include(assigns(:user)), \&quot;Did you assign a new users to @user?\&quot;\n      end\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-signup-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-signup-i&quot;},&quot;authentication-signup-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-signup-ii&quot;,&quot;title&quot;:&quot;Signup II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[{&quot;filename&quot;:&quot;app/controllers/users_controller.rb&quot;}],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great! When you visit the URL `/signup`, the browser makes a GET request for the URL. This request hits the Users controller&#x27;s `new` action, which returns a view displaying the signup page.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Next, let&#x27;s take in data submitted through the signup form and save it to the database.\\n\\\n\\n\\\nIn the Users controller, add a private method `user_params` \\n\\\n```ruby \\n\\\nprivate\\n\\\n  def user_params\\n\\\n    params.require(:user).permit(:first_name, :last_name, :email, :password)\\n\\\n  end \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Between the `new` action and the private method, add the create action \\n\\\n```ruby \\n\\\ndef create \\n\\\n  @user = User.new(user_params) \\n\\\n  if @user.save \\n\\\n    session[:user_id] = @user.id \\n\\\n    redirect_to &#x27;/&#x27; \\n\\\n  else \\n\\\n    redirect_to &#x27;/signup&#x27; \\n\\\n  end \\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec3.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Visit http://localhost:8000/signup and sign up as a new user.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/signup&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Remember to visit the signup page and sign up as a new user.\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec3.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :controller do\n  let(:controller) { UsersController.new }\n\n  before(:each) do\n    User.delete_all\n  end\n\n  context \&quot;user create action\&quot; do\n    it \&quot;should have a create action\&quot; do\n      expect(controller).to respond_to(:create), \&quot;Did you implement the create action?\&quot;\n    end\n\n    context \&quot;user create action\&quot; do\n      it \&quot;should create a new user\&quot; do\n        existing_users = User.all.to_a\n\n        post :create, user: { first_name: \&quot;chewy\&quot;, last_name: \&quot;bake\&quot;, email: \&quot;chewy@chewy.com\&quot;, password: \&quot;ywehc\&quot;, password_confirmation: \&quot;ywehc\&quot;}\n        expect(existing_users).to_not include(assigns(:user)), \&quot;Did you assign a new users to @user?\&quot;\n      end\n    end\n  end\nend\n&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe UsersController, :type =\u003E :controller do\n  let(:controller) { UsersController.new }\n\n  context \&quot;Users\&quot;, private: true do\n    it \&quot;should implement user_params\&quot; do\n      expect(controller).to respond_to(:user_params), \&quot;Did you add the private method &#x27;user_params&#x27; to the Users controller?\&quot;\n    end\n\n    context \&quot;user_params()\&quot; do\n      it \&quot;should allow expected parameters\&quot; do\n        controller.params = { user: { first_name: \&quot;chew\&quot;, last_name: \&quot;baka\&quot;, email: \&quot;chewy@chewy.com\&quot;, password: \&quot;chew1\&quot;} }\n\n        expect(controller.user_params).to include(:first_name), \&quot;Does the user_params method permit a first_name parameter?\&quot;\n        expect(controller.user_params).to include(:last_name), \&quot;Does the user_params method permit a last_name parameter?\&quot;\n        expect(controller.user_params).to include(:email), \&quot;Does the user_params method permit a email parameter?\&quot;\n        expect(controller.user_params).to include(:password), \&quot;Does the user_params method permit a password parameter?\&quot;\n      end\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-signup-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-signup-ii&quot;},&quot;authentication-users&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-users&quot;,&quot;title&quot;:&quot;Users&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Nice job! Now when you fill in the signup form and submit it, the data is sent to the Rails app via a POST request. The request hits the User controller&#x27;s `create` action. The `create` action saves the data, creates a new session, and redirects to the albums page.\n\nHow is a new session created? Sessions are stored as key/value pairs. In the `create` action, the line\n\n```ruby\nsession[:user_id] = @user.id \n```\n\ncreates a new session by taking the value `@user.id` and assigning it to the key `:user_id`.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s check whether the data saved to the database using the *Rails console*. The Rails console is a useful tool to interact with Rails apps. We&#x27;ll use it here to query the database.\\n\\\n\\n\\\nStart the Rails console by running\\n\\\n```bash \\n\\\nrails console\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails console\&quot;, \&quot;rails c\&quot;];\n        if (Components.Terminal.didRunOneOf(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Use &#x27;rails console&#x27; to start the Rails console.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Retrieve all signed up users in the database by typing \\n\\\n```ruby \\n\\\nUser.all \\n\\\n``` \\n\\\nYour information should show up in the results.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;User.all\&quot;];\n        if (Components.Terminal.didRunOneOf(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you retrieve all signed up users?\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Visit http://localhost:8000/signup to sign up a few more users through the signup form. \\n\\\n\\n\\\nUse the Rails console to retrieved all signed up users again.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/signup&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you retrieve all signed up users?\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});\ncheckpoint(\&quot;Exit the Rails console by typing \\n\\\n```\\n\\\nexit \\n\\\n```.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;exit\&quot;];\n        if (Components.Terminal.didRunOneOf(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;exit&#x27; to exit the Rails console.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-users.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-users&quot;},&quot;authentication-login-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-login-i&quot;,&quot;title&quot;:&quot;Login I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;bash .1_7_setup.sh&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Now that users can sign up for a new account, let&#x27;s add the ability to log in and log out of the app. Using the request/response cycle as a guide again, here&#x27;s how logging in and logging out fits in.\n\n**Turn one:**\n1. When the user visit the login page, the browser makes a GET request for the URL `/login`. \n2. The Rails router maps the URL `/login` to the Sessions controller&#x27;s `new` action. The `new` action handles the request and passes it on to the view. \n3. The view displays the login form. \n\n**Turn two:**\n1. When the user fills in and submits the form, the browser sends the data via a POST request to the app.\n2. The router maps the request to the Sessions controller&#x27;s `create` action. \n3. The `create` action verifies that the user exists in the database. If the user exists, the `create` action logs the user in by creating a new session. Otherwise, it reloads the login page.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s begin by adding a login page. Looking at the request/response cycle, we need five parts to add login machinery to the app: a model, a controller, routes, views, and logic for sessions. As we already created the User model when building the signup page, let&#x27;s start here by creating a controller.\\n\\\n\\n\\\nGenerate a controller named Sessions.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rails generate controller Sessions\&quot;, \&quot;bundle exec rails generate controller Sessions\&quot;, \&quot;rails generate controller sessions\&quot;, \&quot;rails g controller Sessions\&quot;, \&quot;rails g controller Sessions\&quot;, \&quot;rails g controller sessions\&quot;, \&quot;rails generate controller Sessions\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rails generate&#x27; to create a controller.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;In the routes file, create a route that maps requests for the URL &#x27;/login&#x27; to the Sessions controller&#x27;s `new` action.\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;In the Sessions controller, add the `new` action \\n\\\n```ruby \\n\\\ndef new \\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {\n  Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Then in **app/views/sessions/new.html.erb**, on line 7, use `form_for` to create a login form: \\n\\\n\\n\\\n```ruby \\n\\\n\u003C%= form_for(:session, url: login_path) do |f| %\u003E \\n\\\n  \u003C%= f.email_field :email, :placeholder =\u003E \\\&quot;Email\\\&quot; %\u003E \\n\\\n  \u003C%= f.password_field :password, :placeholder =\u003E \\\&quot;Password\\\&quot; %\u003E \\n\\\n  \u003C%= f.submit \\\&quot;Log in\\\&quot;, class: \\\&quot;btn-submit\\\&quot; %\u003E\\n\\\n\u003C% end %\u003E``` \\n\\\nWe&#x27;ve also provided CSS in **app/assets/css/application.css**.\&quot;, function(Tests, callback) {\n  Tests.rspecTest(&#x27;spec3.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Restart the Rails server and visit http://localhost:8000/login in the browser.\\n\\\n\\n\\\nThe form won&#x27;t work just yet. We&#x27;ll finish it up next.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/login&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the correct URL in the browser?\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #sessions\&quot; do\n      get(\&quot;/login\&quot;).should route_to(\&quot;sessions#new\&quot;)\n    end\n  end\nend&quot;,&quot;spec3.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe &#x27;sessions/new&#x27;, :type =\u003E :view do\n  context \&quot;login form do\&quot; do\n    it \&quot;renders the form\&quot; do\n      render\n\n      expect(rendered).to have_tag(\&quot;form\&quot;, with: { method: \&quot;post\&quot;}), \&quot;Did you add a form tag?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;email\&quot;, id: \&quot;session_email\&quot;}), \&quot;Did you add a field for email?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;password\&quot;, id: \&quot;session_password\&quot;}), \&quot;Did you add a field for password?\&quot;\n      expect(rendered).to have_tag(\&quot;input\&quot;, with: { type: \&quot;submit\&quot;}), \&quot;Did you add a submit button?\&quot;\n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :controller do\n  let(:controller) { SessionsController.new }\n\n  context \&quot;session new action\&quot; do\n    it \&quot;should have a new action\&quot; do\n      expect(controller).to respond_to(:new), \&quot;Did you implement the new action?\&quot;\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-login-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-login-i&quot;},&quot;authentication-login-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-login-ii&quot;,&quot;title&quot;:&quot;Login II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Well done! \n\n1. When you visit the URL `/login`, the browser makes a GET request for the URL. This request hits the Sessions controller&#x27;s `new` action, which returns a view displaying the login page.\n2. In the login form, we use `form_for(:session, url: login_path) do |f|`. This refers to the name of the resource and corresponding URL. In the signup form, we used `form_for(@user) do |f|` since we had a User model. For the login form, we don&#x27;t have a Session model, so we refer to the parameters above. \n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Next, let&#x27;s take in data submitted through the form and log the user in by starting a new session. \\n\\\n\\n\\\nIn the routes file, create a route that maps the URL &#x27;/login&#x27; to the Sessions controller&#x27;s `create` action.\\n\\\n\\n\\\n```ruby \\n\\\npost &#x27;login&#x27; =\u003E &#x27;sessions#create&#x27;\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;In the Sessions controller, add the `create` action \\n\\\n```ruby\\n\\\ndef create\\n\\\n  @user = User.find_by_email(params[:session][:email])\\n\\\n  if @user \u0026\u0026 @user.authenticate(params[:session][:password])\\n\\\n    session[:user_id] = @user.id\\n\\\n    redirect_to &#x27;/&#x27;\\n\\\n  else\\n\\\n    redirect_to &#x27;login&#x27;\\n\\\n  end \\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Visit http://localhost:8000/login and log in with your email and password.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/login&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the login page and log in with your email and password?\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #sessions\&quot; do\n      post(\&quot;/login\&quot;).should route_to(\&quot;sessions#create\&quot;)\n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :controller do\n  let(:controller) { SessionsController.new }\n\n  context \&quot;user create action\&quot; do\n    it \&quot;should have a create action\&quot; do\n      expect(controller).to respond_to(:create), \&quot;Did you implement the create action?\&quot;\n    end\n\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-login-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-login-ii&quot;},&quot;authentication-logout&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-logout&quot;,&quot;title&quot;:&quot;Logout&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Nice job! Now when you fill in the login form and submit it, the data is sent to the Rails app via a POST request. The request hits the Sessions controller&#x27;s `create` action. The `create` action checks whether your email and password exist in the database, creates a new session, and redirects to the albums page.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Now that users can log in, let&#x27;s add the ability to log out.\\n\\\n\\n\\\nIn the routes file, create a route that maps the URL `/logout` to the Sessions controller&#x27;s `destroy` action: \\n\\\n```ruby \\n\\\ndelete &#x27;logout&#x27; =\u003E &#x27;sessions#destroy&#x27; \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;In the Session controller, add the `destroy` action by setting the session hash to nil and redirecting to the root path \\n\\\n```ruby \\n\\\ndef destroy \\n\\\n  session[:user_id] = nil \\n\\\n  redirect_to &#x27;/&#x27; \\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {\nTests.rspecTest(&#x27;spec2.rb&#x27;, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :routing do\n  context \&quot;Route test\&quot; do\n    it \&quot;routes to #sessions\&quot; do\n      delete(\&quot;/logout\&quot;).should route_to(\&quot;sessions#destroy\&quot;)\n    end\n  end\nend&quot;,&quot;spec2.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe SessionsController, :type =\u003E :controller do\n  let(:controller) { SessionsController.new }\n\n  context \&quot;session destroy action\&quot; do\n    it \&quot;should have a destroy action\&quot; do\n      expect(controller).to respond_to(:destroy), \&quot;Did you implement the destroy action?\&quot;\n    end\n\n    it \&quot;should remove user id from session\&quot; do\n      session[:user_id] = 1\n\n      response =  post :destroy\n      expect(session[:user_id]).to be(nil)\n      expect(response).to redirect_to(&#x27;/&#x27;)\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-logout.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-logout&quot;},&quot;authentication-current-user&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-current-user&quot;,&quot;title&quot;:&quot;current_user&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great work so far! We&#x27;ve built an authentication system that lets new users sign up for the site, and lets existing users log in and out.\n\nHowever, there&#x27;s one problem - even after you log out, you can still access the albums page. Why does this happen? Let&#x27;s look at the request/response cycle:\n\n1. Currently when a user visits the URL /albums, the browser first makes a request for that URL.\n2. The request hits the Rails router.\n3. The router sends the request to the Albums controller&#x27;s `index` action *regardless of whether a user is logged in*.\n\nWhat we want instead is for only users who are logged in to see the albums page; otherwise they should be redirected to the login page. This means that we need to check whether a user is logged in before sending her request on to the Albums controller&#x27;s `index` action. Let&#x27;s see how to do this.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In **app/controllers/application_controller.rb**, add a method named `current_user` \\n\\\n```\\n\\\nhelper_method :current_user \\n\\\n\\n\\\ndef current_user \\n\\\n  @current_user ||= User.find(session[:user_id]) if session[:user_id] \\n\\\nend \\n\\\n```\&quot;, function(Tests, callback) {             \nTests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Below `current_user`, add another method named `require_user`: \\n\\\n```ruby \\n\\\ndef require_user \\n\\\n  redirect_to &#x27;/login&#x27; unless current_user \\n\\\nend  \\n\\\n``` \\n\\\n\\n\\\n\&quot;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n      if (Components.CodeEditor.codeContains(\&quot;app/controllers/application_controller.rb\&quot;, /\\s?redirect_to\\s&#x27;\\/login&#x27;\\sunless\\scurrent_user/)) {\n         return {pass: true};\n      }\n      return {pass: false, errors: { friendly: \&quot;Did you add the require_user method?\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n });&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe ApplicationController, :type =\u003E :controller do\n   controller do\n    def index\n      current_user\n      render nothing: true\n    end\n  end\n\n  before(:each) do\n    User.delete_all\n  end\n\n  context \&quot;current_user action\&quot; do\n    context \&quot;user create action\&quot; do\n      it \&quot;current_user\&quot; do\n      u = User.create(email: \&quot;test\&quot;, password: \&quot;test\&quot;, password_confirmation: \&quot;test\&quot;)\n      session[:user_id] = u.id\n\n      get :index\n      expect(assigns(:current_user).id).to be(u.id)\n      end\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-current-user.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-current-user&quot;},&quot;authentication-filters&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-filters&quot;,&quot;title&quot;:&quot;Filters&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;How do these methods work?\n\n1. The `current_user` method determines whether a user is logged in or logged out. It does this by checking whether there&#x27;s a user in the database with a given session id. If there is, this means the user is logged in and `@current_user` will store that user; otherwise the user is logged out and `@current_user` will be `nil`.\n2. The line `helper_method :current_user` makes `current_user` method available in the views. By default, all methods defined in Application Controller are already available in the controllers.   \n3. The `require_user` method uses the `current_user` method to redirect logged out users to the login page.\n\nHere&#x27;s more on the \u003Ca href=\&quot;http://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby\&quot; target=\&quot;_blank\&quot;\u003E||= syntax\u003C/a\u003E.\nHere&#x27;s more on the \u003Ca href=\&quot;https://signalvnoise.com/posts/2699-making-sense-with-rubys-unless\&quot; target=\&quot;_blank\&quot;\u003E`unless` keyword\u003C/a\u003E.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s use `require_user` in the Albums controller in order prevent logged out users from accessing these pages. In the Albums controller, add this as the first line inside the class: \\n\\\n```ruby \\n\\\nbefore_action :require_user, only: [:index, :show]``` \\n\\\n\\n\\\nThe `before_action` command calls the `require_user` method before running the index or show actions.\&quot;, function(Tests, callback) {\n   Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/controllers/albums_controller.rb\&quot;, \&quot;before_action :require_user, only: \\\\[:index, :show\\\\]\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you add the before action :require_user?\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n\n});\ncheckpoint(\&quot;Let&#x27;s use `current_user` in application layout to update the nav items depending on whether a user is logged in or out. In **app/views/layouts/application.html.erb**, within `\u003Cdiv class=\\\&quot;nav pull-right\\\&quot;\u003E` on line 21 add: \\n\\\n```html \\n\\\n\u003C% if current_user %\u003E \\n\\\n  \u003Cul\u003E \\n\\\n    \u003Cli\u003E\u003C%= current_user.email %\u003E\u003C/li\u003E \\n\\\n    \u003Cli\u003E\u003C%= link_to \\\&quot;Log out\\\&quot;, logout_path, method: \\\&quot;delete\\\&quot; %\u003E\u003C/li\u003E \\n\\\n  \u003C/ul\u003E \\n\\\n\u003C% else %\u003E \\n\\\n  \u003Cul\u003E \\n\\\n    \u003Cli\u003E\u003C%= link_to \\\&quot;Login\\\&quot;, &#x27;login&#x27; %\u003E\u003C/a\u003E\u003C/li\u003E \\n\\\n    \u003Cli\u003E\u003C%= link_to \\\&quot;Signup\\\&quot;, &#x27;signup&#x27; %\u003E\u003C/a\u003E\u003C/li\u003E \\n\\\n  \u003C/ul\u003E \\n\\\n\u003C% end %\u003E \\n\\\n```\&quot;, function(Tests, callback) {\nTests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Log out of the app, and then visit http://localhost:8000/albums in the browser. You should be be redirected to the login page.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/albums&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the correct page in the browser?\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});\ncheckpoint(\&quot;Log in to the app with your email and password, and then visit http://localhost:8000/albums. You should now be able to access it.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/albums&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you visit the correct page in the browser?\&quot;, component: &#x27;WebBrowser&#x27;}};\n\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;rails_helper&#x27;\nrequire &#x27;spec_helper&#x27;\n\ndescribe &#x27;layouts/application.html.erb&#x27;, :type =\u003E :view do\n\n  context \&quot;Check if user signed in\&quot; do\n    it \&quot;renders the user name\&quot; do\n\n      controller.singleton_class.class_eval do\n        def current_user\n          User.new(:first_name =\u003E \&quot;fakeuser\&quot;, :last_name =\u003E \&quot;fake\&quot;, :email =\u003E \&quot;testuser@fake.com\&quot;, :password =\u003E \&quot;password\&quot;)\n        end\n        helper_method :current_user\n      end\n\n      render\n      expect(rendered).to include(\&quot;testuser@fake.com\&quot;), \&quot;Did you output the user&#x27;s email.\&quot;\n      expect(rendered).not_to include(\&quot;Login\&quot;), \&quot;You should not output login if user is signed in.\&quot;\n    end\n  end\nend\n&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-filters.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-filters&quot;},&quot;authentication-generalizations&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authentication-generalizations&quot;,&quot;title&quot;:&quot;Generalizations&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-1&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Congratulations! You built an authentication system from scratch. What can we generalize so far?\n\n* An authentication system is made up of sign up, log in, log out functionality.\n* The `password_digest` column and `has_secure_password` method are provided by bcrypt to store passwords securely. \n* A *session* begins when a users logs in, and ends when a user logs out. \n* The `current_user` method allow us to access the current user; `require_user` redirects to the root of the app if there is no such user. \n* Before actions act as filters. They call methods before executing controller actions. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/exercises/authentication-generalizations.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/exercises/authentication-generalizations&quot;}},&quot;uuid&quot;:&quot;7dc579b095e13621bff55e1dad689622&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/lessons/authentication/authentication.en.yml&quot;,&quot;exercises_order&quot;:[&quot;authentication-authentication&quot;,&quot;authentication-user-model&quot;,&quot;authentication-user-migration&quot;,&quot;authentication-signup-i&quot;,&quot;authentication-signup-ii&quot;,&quot;authentication-users&quot;,&quot;authentication-login-i&quot;,&quot;authentication-login-ii&quot;,&quot;authentication-logout&quot;,&quot;authentication-current-user&quot;,&quot;authentication-filters&quot;,&quot;authentication-generalizations&quot;],&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/resume&quot;,&quot;unit_slug&quot;:&quot;authentication&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false},&quot;authorization&quot;:{&quot;node_type&quot;:&quot;lesson&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;description&quot;:&quot;Give specific users permission to access certain parts of your app.&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/authorization&quot;,&quot;exercises&quot;:{&quot;authorization-authorization&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-authorization&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;whitelist&quot;:[{&quot;matcher&quot;:&quot;^bundle install&quot;},{&quot;matcher&quot;:&quot;rails s&quot;},{&quot;matcher&quot;:&quot;rails server&quot;}],&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;So far we&#x27;ve seen how to build an authentication system that lets users sign up, log in, and log out.\n\nIn addition to authentication, many web apps have a way to give specific users permission to access certain parts of the site. For example, a blog would give only its authors permission to access the editing and publishing parts of the site. Permissions are defined with an *authorization system*.\n\nLet&#x27;s create an authorization system for a recipe website built with Rails.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;We&#x27;ve provided a Rails app to get you started. Let&#x27;s take a look - first install the gems in the **Gemfile**.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validCommands = [\&quot;bundle install\&quot;]; \n          if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) { \n              return {pass: true}; \n          } \n          return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;bundle&#x27; to install the gems.\&quot;, component: &#x27;Terminal&#x27;}}; \n        }, callback); \n      });\ncheckpoint(\&quot;Next start a Rails development server.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validCommands = [\&quot;rails server\&quot;, \&quot;rails s\&quot;]; \n          if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) { \n              return {pass: true}; \n          } \n          return {pass: false, errors: { friendly: \&quot;Make sure to run &#x27;rails server&#x27; in the terminal.\&quot;, component: &#x27;Terminal&#x27;}}; \n        }, callback); \n      });\ncheckpoint(\&quot;Then preview the app by visiting http://localhost:8000.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validUrls = [&#x27;http://localhost:8000&#x27;]; \n          if (Components.WebBrowser.loadedOneOf(validUrls)) { \n              return {pass: true}; \n          }\n          return {pass: false, errors: { friendly: &#x27;Make sure to visit `http://localhost:8000` in the browser.&#x27;, component: &#x27;WebBrowser&#x27;}}; \n        }, callback); \n      });\ncheckpoint(\&quot;Click on \\\&quot;View Recipes\\\&quot; to see recipes inside a cuisine.\\n\\\n\\n\\\nHow can we add an authorization system to this app? Click Next to learn more.\&quot;, function(Tests, callback) { \n          Tests.componentTest(function(Components) { \n          var validUrls = [&#x27;http://localhost:8000/cuisines/1&#x27;, &#x27;http://localhost:8000/cuisines/2&#x27;, &#x27;http://localhost:8000/cuisines/3&#x27;]; \n          if (Components.WebBrowser.loadedOneOf(validUrls)) { \n              return {pass: true}; \n          }\n          return {pass: false, errors: { friendly: &#x27;Click on a \&quot;View Recipes\&quot; link to see the recipes inside a cuisine.&#x27;, component: &#x27;WebBrowser&#x27;}}; \n        }, callback); \n      });&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-authorization.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-authorization&quot;},&quot;authorization-user-model&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-user-model&quot;,&quot;title&quot;:&quot;Roles&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Using the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-dynamic\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide, here&#x27;s how authorization fits in:\n1. The browser makes a request for a URL\n2. The request hits the Rails router\n3. Before the router sends the request on to the controller action, the app determines whether the user has access permission by looking at the user&#x27;s *role*.\n\nWhat is a role? A role is a way to manage what parts of a site a user has access to. A user&#x27;s role is specified in the database.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s begin building an authorization system by adding a `role` column to the users table. \\n\\\n\\n\\\nOpen the migration file for the users table in **db/migrate/**, and add the following column: \\n\\\n \\n\\\n * a `string` column called `role`\&quot;, function(Tests, callback) {\n        Tests.componentTest(function(Components) {\n            if (Components.CodeEditor.codeContains(/db\\/migrate\\/.*_create_users.rb/, /t\\.string\\s*:role/)) {\n              return {pass: true};\n            }\n            return {pass: false, errors: { friendly: \&quot;Make sure the migration file has a &#x27;role&#x27; column of type &#x27;string&#x27;.\&quot;, component: &#x27;PersistentCodeEditor&#x27;}};\n          }, callback);\n      });\ncheckpoint(\&quot;Run the migration to update the database with the users table.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rake db:migrate\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to use &#x27;rake&#x27; to run the migration.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-user-model.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-user-model&quot;},&quot;authorization-editor-role-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-editor-role-i&quot;,&quot;title&quot;:&quot;Editor Role I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;cp db/.2_3_seeds.rb db/seeds.rb \n&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great! In the users table, we now have a column named `role` that we can use to assign different roles to users, such as \&quot;editor\&quot; or \&quot;admin\&quot;.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;Let&#x27;s add a method to the User model that will help us use the role column in our application. Within the class User, beneath the `has_secure_password` method, type \\n\\\n\\n\\\n```ruby \\n\\\ndef editor? \\n\\\n  self.role == &#x27;editor&#x27; \\n\\\nend\\n\\\n```\\n\\\n\\n\\\nWe can use this method to determine if a user has the role of editor.\&quot;, function(Tests, callback) {     Tests.rspecTest(&#x27;spec.rb&#x27;, callback);\n});\ncheckpoint(\&quot;Open **db/seeds.rb**. We\\&#x27;ve added a user named Mateo with the role &#x27;editor&#x27;. Seed the database with this data \\n\\\n```bash \\n\\\n$ rake db:seed \\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [\&quot;rake db:seed\&quot;];\n        if (Components.Terminal.ranOneOfWithExitCode(validCommands, 0)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to use &#x27;rake&#x27; to seed the database.\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});\ncheckpoint(&#x27;We should now be able to use the editor? method to check whether a user has an editor role. First, start the Rails console by running\\n\\\n```bash \\n\\\n$ rails console\\n\\\n``` \\n\\\nThen check whether Mateo is an editor \\n\\\n```bash \\n\\\n\u003E mateo = User.find_by(email: \\&#x27;mateo@email.com\\&#x27;)\\n\\\n\u003E mateo.editor?\\n\\\n```&#x27;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [/mateo\\.editor\\?/];\n        if (Components.Terminal.didRunOneOf(validCommands)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you check if Mateo is an editor?\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;editor\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a editor method\&quot; do\n       expect(user).to respond_to(:editor?), \&quot;Did you implement the editor method?\&quot;\n    end\n    it \&quot;should get role to be editor\&quot; do\n      expect(user.editor?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-editor-role-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-editor-role-i&quot;},&quot;authorization-editor-role-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-editor-role-ii&quot;,&quot;title&quot;:&quot;Editor Role II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;http://localhost:8000/login&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;We created a method named `editor?` that checks whether a user&#x27;s role is \&quot;editor\&quot;, and returns `true` or `false`. The method uses `self` to refer to the current instance of a User object.\n\nNow that we can determine whether a user has an editor role on the site, let&#x27;s add a few methods to the Application controller (**app/controllers/application_controller.rb**) to make sure that users with the editor role can access specific parts of the site.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In the Application controller (**app/controllers/application_controller.rb**), below `require_user`, add another method named `require_editor` \\n\\\n```ruby \\n\\\ndef require_editor \\n\\\n  redirect_to &#x27;/&#x27; unless current_user.editor? \\n\\\nend\\n\\\n```\&quot;, function(Tests, callback) {  Tests.rspecTest(&#x27;spec.rb&#x27;, callback);    \n});\ncheckpoint(&#x27;Next, in the Recipes controller, use another before action that uses `require_editor` to permit only users with an editor role to access the `show` and `edit` actions \\n\\\n```ruby \\n\\\nbefore_action :require_editor, only: [:show, :edit]```&#x27;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/controllers/recipes_controller.rb\&quot;, \&quot;before_action :require_editor, only: \\\\[:show, :edit\\\\]\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to add before_action require_editor to the Recipes controller\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Then in **app/views/recipes/show.html**, use the `editor?` method  to display an edit link only if a user is an editor \\n\\\n```ruby \\n\\\n\u003C% if current_user \u0026\u0026 current_user.editor? %\u003E \\n\\\n  \u003Cp class=\\\&quot;recipe-edit\\\&quot;\u003E \\n\\\n    \u003C%= link_to \\\&quot;Edit Recipe\\\&quot;, edit_recipe_path(@recipe.id) %\u003E \\n\\\n  \u003C/p\u003E \\n\\\n\u003C% end %\u003E \\n\\\n```\&quot;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/views/recipes/show.html.erb\&quot;, \&quot;if current_user \u0026\u0026 current_user\\\\.editor\\\\?\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to add an edit link that displays only if the current user is an editor.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Try it out - first log in to the app as a user without a role. Looking at **db/seeds.rb**, Julian doesn&#x27;t have an editor role, so use his email `julian@email.com` and password `Julian1` to log in. Then visit http://localhost:8000/recipes/1. You shouldn&#x27;t see the Edit link on this page.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/recipes/1&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you login with Julian&#x27;s credentials and visit http://localhost:8000/recipes/1?\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});\ncheckpoint(\&quot;Log out of the app, and then log back in as an editor. Looking at **db/seeds.rb**, Mateo has an editor role, so use his email `mateo@email.com` and password `Mateo1` to log in to the app. Then visit http://localhost:8000/recipes/1. You should see the Edit link.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/recipes/1&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Did you login with the editor Mateo&#x27;s credentials and visit http://localhost:8000/recipes/1\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;editor\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a editor method\&quot; do\n       expect(user).to respond_to(:editor?), \&quot;Make sure to add an editor method to the User model.\&quot;\n    end\n    it \&quot;should get role to be editor\&quot; do\n      expect(user.editor?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-editor-role-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-editor-role-ii&quot;},&quot;authorization-admin-role-i&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-admin-role-i&quot;,&quot;title&quot;:&quot;Admin Role I&quot;,&quot;setup&quot;:{&quot;command&quot;:&quot;cp db/.2_5_seeds.rb db/seeds.rb \n&quot;},&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great work! The role-based authorization system is working. Users with an editor role have permissions to see the edit page, while users without that role do not.&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In the User model, add a method named `admin?` that determines whether a user has an admin role on the site.\&quot;, function(Tests, callback) {  Tests.rspecTest(&#x27;spec.rb&#x27;, callback);    \n});\ncheckpoint(\&quot;Open **db/seeds.rb**. We&#x27;ve added a user named Freida with the role `admin`.\\n\\\n\\n\\\nWe should now be able to use the `admin?` method to check whether a user has an editor role. Enter the Rails console and type: \\n\\\n```ruby \\n\\\n\u003E freida = User.find_by(email: &#x27;freida@email.com&#x27;) \\n\\\n\u003E freida.admin?\\n\\\n```\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n        var validCommands = [/freida\\.admin\\?/, /freida\\.editor\\?/];\n        if (Components.Terminal.didRunOneOf(validCommands)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Did you check if &#x27;freida&#x27; is an admin?\&quot;, component: \&quot;Terminal\&quot; }};\n    }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;admin\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a admin method\&quot; do\n       expect(user).to respond_to(:admin?), \&quot;Make sure to add an admin method to the User model.\&quot;\n    end\n    it \&quot;should get role to be admin\&quot; do\n      expect(user.admin?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-admin-role-i.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-admin-role-i&quot;},&quot;authorization-admin-role-ii&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-admin-role-ii&quot;,&quot;title&quot;:&quot;Admin Role II&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;url&quot;:&quot;http://localhost:8000/login&quot;,&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Great job! We now have a way to determine whether a user has an admin role on the site. Let&#x27;s add a few methods to the Application controller to make sure that users with the admin role can access specific parts of the site.\n&quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{&quot;checkpoints&quot;:&quot;checkpoint(\&quot;In the Application controller, create a method named `require_admin`.\&quot;, function(Tests, callback) {  Tests.rspecTest(&#x27;spec.rb&#x27;, callback);    \n});\ncheckpoint(\&quot;In the Recipes controller, create a before action that calls the `require_admin` method before running the `destroy` method.\&quot;, function(Tests, callback) {\n   Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/controllers/recipes_controller.rb\&quot;, \&quot;before_action :require_admin, only: \\\\[:destroy\\\\]\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Remember to add before_action require_admin to the Recipes controller.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n\n});\ncheckpoint(\&quot;In **app/views/recipes/show.html.erb**, use the `admin?` method to display a delete link only if a user is an admin: \\n\\\n```html \\n\\\n\u003C% if current_user \u0026\u0026 current_user.admin? %\u003E \\n\\\n  \u003Cp class=\\\&quot;recipe-delete\\\&quot;\u003E\u003C%= link_to \\\&quot;Delete\\\&quot;, recipe_path(@recipe), method: \\\&quot;delete\\\&quot; %\u003E\u003Cp\u003E \\n\\\n\u003C% end %\u003E \\n\\\n```\&quot;, function(Tests, callback) {\n  Tests.componentTest(function(Components) {\n        if (Components.CodeEditor.codeContains(\&quot;app/views/recipes/show.html.erb\&quot;, \&quot;if current_user \u0026\u0026 current_user\\\\.admin\\\\?\&quot;)) {\n            return {pass: true};\n        }\n  return {pass: false, errors: { friendly: \&quot;Make sure to add a delete link that displays only if the current user is an admin.\&quot;, component: \&quot;PersistentCodeEditor\&quot; }};\n    }, callback);\n});\ncheckpoint(\&quot;Try it out. Sign in as Freida with the email `freida@email.com` and password `Freida1`. Then visit http://localhost:8000/recipes/1. You should see your delete link.\&quot;, function(Tests, callback) {\n    Tests.componentTest(function(Components) {\n    if (Components.WebBrowser.loadedURL(&#x27;http://localhost:8000/recipes/1&#x27;)) {\n        return {pass: true};\n    }\n        return {pass: false, errors: { friendly: \&quot;Remember to sign in with Freida&#x27;s credentials and visit http://localhost:8000/recipes/1.\&quot;, component: &#x27;WebBrowser&#x27;}};\n  }, callback);\n});&quot;,&quot;files&quot;:{&quot;spec.rb&quot;:&quot;require &#x27;spec_helper&#x27;\nrequire &#x27;rails_helper&#x27;\n\ndescribe User, :type =\u003E :model do\n  user = User.new\n  user.role = \&quot;admin\&quot;\n\n  context \&quot;Checkpoint 1\&quot; do\n    it \&quot;should have a admin method\&quot; do\n       expect(user).to respond_to(:admin?), \&quot;Did you implement the admin method?\&quot;\n    end\n    it \&quot;should get role to be admin\&quot; do\n      expect(user.admin?).to be true\n    end\n  end\nend&quot;}},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-admin-role-ii.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-admin-role-ii&quot;},&quot;authorization-generalizations&quot;:{&quot;node_type&quot;:&quot;exercise&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;authorization-generalizations&quot;,&quot;title&quot;:&quot;Generalizations&quot;,&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth-2&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Narrative&quot;:{&quot;content&quot;:&quot;Congratulations! You built a authorization system from scratch.\n\n1. The _role_ column in the User model specifies a users&#x27; role\n2. A method like `def admin?` and `def editor?` is created for business logic\n3. The `require_editor` and `require_admin` methods redirect to (\\) if the current user is not an editor or admin. \n4. The before action acts a filter, calling `require_editor` or `require_admin` before excuting controller actions. \n5. The `current_user` method can be used in the views to display links based on the signed in user&#x27;s role. &quot;,&quot;_schema&quot;:&quot;Narrative&quot;}},&quot;tests&quot;:{},&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/exercises/authorization-generalizations.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/exercises/authorization-generalizations&quot;}},&quot;uuid&quot;:&quot;de82bd54b763639a4904209b9c2966ef&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/lessons/authorization/authorization.en.yml&quot;,&quot;exercises_order&quot;:[&quot;authorization-authorization&quot;,&quot;authorization-user-model&quot;,&quot;authorization-editor-role-i&quot;,&quot;authorization-editor-role-ii&quot;,&quot;authorization-admin-role-i&quot;,&quot;authorization-admin-role-ii&quot;,&quot;authorization-generalizations&quot;],&quot;path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/resume&quot;,&quot;unit_slug&quot;:&quot;authorization&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;projects&quot;:{&quot;rails-auth_newstand-1&quot;:{&quot;node_type&quot;:&quot;project&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;rails-auth_newstand-1&quot;,&quot;title&quot;:&quot;Newstand 1&quot;,&quot;description&quot;:&quot;In this project, you\u2019ll add sign up, log in, and log out system from scratch.&quot;,&quot;thumbnail_url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/project_thumbnails/rails-auth/newstand-1.jpg&quot;,&quot;preview_url&quot;:&quot;https://infinite-stream-5328.herokuapp.com/&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/rails-authnewstand-1&quot;,&quot;objective&quot;:&quot;Newstand wants to add an authentication system to their news app.\n\nAn authentication system is made up of three parts:\n1. A **signup page** for new users to create accounts\n2. A **login page**, for returning users to sign back in to the site\n3. A **log out functionality**, which allows users to sign out\n\nUse the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-forms\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide to add an authentication system.&quot;,&quot;meta&quot;:{&quot;authors&quot;:[&quot;BanaKM&quot;]},&quot;self_assessments&quot;:[{&quot;heading&quot;:&quot;Setup&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_0_1&quot;,&quot;text&quot;:&quot;Install the gems in the **Gemfile**&quot;},{&quot;key&quot;:&quot;Newstand_0_2&quot;,&quot;text&quot;:&quot;Run `rake db:seed` to seed the database with the data in **db/seeds.rb**.&quot;},{&quot;key&quot;:&quot;Newstand_0_3&quot;,&quot;text&quot;:&quot;Start a Rails server to preview the app in the browser. In the terminal, type:\n\n```bash\n$ rails server -p 4001\n```\n\nThis command starts a Rails server listening on port 4001. &quot;},{&quot;key&quot;:&quot;Newstand_0_4&quot;,&quot;text&quot;:&quot;Then visit http://localhost:4001 to see your app in the browser. The app currently has two main page:\n* The home page displays a list of all articles\n* When you click on an article, it shows that individual article\n\nWe&#x27;re going to add an authentication system to this app so that users need to be logged in to read individual articles.&quot;},{&quot;key&quot;:&quot;Newstand_0_5&quot;,&quot;text&quot;:&quot;To get started, shut down the Rails server. In the terminal, press **Ctrl+C**. We&#x27;ll restart the Rails server and preview the app later on after adding new functionality.&quot;},{&quot;key&quot;:&quot;Newstand_0_6&quot;,&quot;text&quot;:&quot;Add the `bcrypt` gem to the **Gemfile**. Then run `bundle install` to install the gems specified in the **Gemfile**.&quot;}]},{&quot;heading&quot;:&quot;Add a User model&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_1_0&quot;,&quot;text&quot;:&quot;Generate a model named User to store users&#x27; names, emails, and passwords.&quot;},{&quot;key&quot;:&quot;Newstand_1_1&quot;,&quot;text&quot;:&quot;Open the migration file in **db/migrate** for the users table, and add the following columns:\n* a string column called `first_name`\n* a string column called `last_name`\n* a string column called `email`\n* a string column called `password_digest`&quot;},{&quot;key&quot;:&quot;Newstand_1_2&quot;,&quot;text&quot;:&quot;Run the migration to update the database.&quot;},{&quot;key&quot;:&quot;Newstand_1_3&quot;,&quot;text&quot;:&quot;Add `has_secure_password` to the User model. This will let us save a securely-hashed password to the database, and adds a few helper methods that we&#x27;ll use later.\n&quot;}]},{&quot;heading&quot;:&quot;Check the database&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_2_0&quot;,&quot;text&quot;:&quot;Confirm that new users can be saved to the database by using the Rails console. The Rails console is a useful tool to interact with Rails apps. We&#x27;ll use it here to query the database. In the terminal, open a new tab by clicking the \u003Ci class=\&quot;fcn-icon fcn-icon-plus\&quot;\u003E\u003C/i\u003E&quot;},{&quot;key&quot;:&quot;Newstand_2_2&quot;,&quot;text&quot;:&quot;Start the Rails console.&quot;},{&quot;key&quot;:&quot;Newstand_2_3&quot;,&quot;text&quot;:&quot;When you enter the Rails console, create a new user using the `create` method:\n\n```ruby\n\u003E User.create(first_name: \&quot;Edna\&quot;, last_name: \&quot;Mode\&quot;, email: &#x27;edna@example.com&#x27;, password: &#x27;incredibles&#x27;)\n```&quot;},{&quot;key&quot;:&quot;Newstand_2_4&quot;,&quot;text&quot;:&quot;Find this user object using the `find_by` method, and save it into a variable named `myuser`. \u003Ca href=\&quot;http://guides.rubyonrails.org/active_record_basics.html#read\&quot; target=\&quot;_blank\&quot;\u003EHere&#x27;s an example of how to use the \u003Ccode\u003Efind_by\u003C/code\u003E method\u003C/a\u003E.\n&quot;},{&quot;key&quot;:&quot;Newstand_2_5&quot;,&quot;text&quot;:&quot;Print out the `myuser` object&#x27;s `email` attribute:\n\n```ruby\n\u003E myuser.email\n```&quot;},{&quot;key&quot;:&quot;Newstand_2_6&quot;,&quot;text&quot;:&quot;Print out the `myuser` object&#x27;s `password_digest` attribute. This is the encrypted version of the password you used to create the user object above. This encrypted password is constructed using the `bcrypt` gem you installed earlier. Storing encrypted passwords instead of original passwords is more secure.&quot;},{&quot;key&quot;:&quot;Newstand_2_7&quot;,&quot;text&quot;:&quot;Use the `authenticate` method with an incorrect password:\n\n```ruby\nmyuser.authenticate(\&quot;wrong_pwd\&quot;)\n```\n\nThe `has_secure_password` you added to the User model comes with a method named `authenticate`. When a user tries to log in again, Rails will use the `authenticate` method to determine whether the password entered is valid by first hashing it and then comparing it to the `password_digest` field in the database. Here, the wrong password should return `false`.&quot;},{&quot;key&quot;:&quot;Newstand_2_8&quot;,&quot;text&quot;:&quot;Use `authenticate` with the password that you created the user object with. The correct password should return the user itself.&quot;},{&quot;key&quot;:&quot;Newstand_2_9&quot;,&quot;text&quot;:&quot;Exit the Rails console by typing `exit`.&quot;}]},{&quot;heading&quot;:&quot;Signup page&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_3_0&quot;,&quot;text&quot;:&quot;An authentication system is made up of three parts - a signup page, a login page, and log out functionality. Let&#x27;s start by creating the signup page.\n\nGenerate a controller named Users.&quot;},{&quot;key&quot;:&quot;Newstand_3_1&quot;,&quot;text&quot;:&quot;In the routes file, map the GET request for the URL /signup to the Users controller&#x27;s `new` action.&quot;},{&quot;key&quot;:&quot;Newstand_3_2&quot;,&quot;text&quot;:&quot;In the routes file, also add the resource route for the Users controller.\n\n```ruby\nresources :users\n```&quot;},{&quot;key&quot;:&quot;Newstand_3_3&quot;,&quot;text&quot;:&quot;Run `rake routes` to view all the new URLs that are now available:\n* We&#x27;ll use `users#new` to handle GET requests and display the signup page\n* We&#x27;ll use `users#create` to handle POST requests and save a new user to the database&quot;},{&quot;key&quot;:&quot;Newstand_3_4&quot;,&quot;text&quot;:&quot;First, in the Users controller, make an action named `new` to handle the GET requests. Inside the `new` action, create a new User object and save it into a variable named `@user`.&quot;},{&quot;key&quot;:&quot;Newstand_3_5&quot;,&quot;text&quot;:&quot;In **app/views/users/new.html.erb**, use `form_for` to create a form with the fields of the `@user` object.&quot;},{&quot;key&quot;:&quot;Newstand_3_6&quot;,&quot;text&quot;:&quot;View the result by starting a Rails development server and visiting http://localhost:4001/signup. The signup form should display.&quot;},{&quot;key&quot;:&quot;Newstand_3_7&quot;,&quot;text&quot;:&quot;Second, in the Users controller, write a private method named `user_params`. Reqire the model name `user` and permit the column names `first_name`, `last_name`, `email`, and `password`.&quot;},{&quot;key&quot;:&quot;Newstand_3_8&quot;,&quot;text&quot;:&quot;Third, in the Users controller, make an action named `create` to handle the POST requests. Use `user_params` to create a new User object. If `user.save` is successful, redirect to the root path `/`. Otherwise, redirect to the signup page.&quot;},{&quot;key&quot;:&quot;Newstand_3_9&quot;,&quot;text&quot;:&quot;Restart the Rails server and view the changes by visiting http://localhost:4001/signup. Sign up as a new user and submit the form. \n\nTo restart a Rails server, in the terminal, first press **Ctrl+C** to shut down the server. Then type `rails server -p 4001` to start it again.&quot;},{&quot;key&quot;:&quot;Newstand_3_10&quot;,&quot;text&quot;:&quot;Start the Rails console and find your newly-created user to check that it was saved to the database.&quot;}]},{&quot;heading&quot;:&quot;Login page&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_4_0&quot;,&quot;text&quot;:&quot;Next, create a log in page.\n\nGenerate a controller named Sessions.&quot;},{&quot;key&quot;:&quot;Newstand_4_1&quot;,&quot;text&quot;:&quot;In the routes file, create a route that maps GET requests for the URL /login to the Sessions controller&#x27;s `new` action. We&#x27;ll use this route to handle GET requests and display the login page.&quot;},{&quot;key&quot;:&quot;Newstand_4_2&quot;,&quot;text&quot;:&quot;Then create another route that maps POST requests for the URL /login to the Sessions controller&#x27;s `create` action. We&#x27;ll use this route to handle POST requests and check whether the submitted username and password match the ones in the database.&quot;},{&quot;key&quot;:&quot;Newstand_4_3&quot;,&quot;text&quot;:&quot;First, in the Sessions controller, make an empty action named `new`.&quot;},{&quot;key&quot;:&quot;Newstand_4_4&quot;,&quot;text&quot;:&quot;In **app/views/sessions/new.html.erb**, create a form using `form_for`. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-login-i\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.\n\nThe difference between this login form and the signup form above is how we use `form_for`. In the signup form, we used `form_for(@user) do |f|` since we had a User model to refer to. For the login form, we don&#x27;t have a Session model, so we instead use the name of the resource and the corresponding URL with `form_for(:session, url: login_path) do |f|`.&quot;},{&quot;key&quot;:&quot;Newstand_4_5&quot;,&quot;text&quot;:&quot;Restart the Rails server and view the result by visiting http://localhost:4001/login.&quot;},{&quot;key&quot;:&quot;Newstand_4_6&quot;,&quot;text&quot;:&quot;Second, in the Sessions controller, make an action named `create` to handle `POST` requests. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-login-ii\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.&quot;},{&quot;key&quot;:&quot;Newstand_4_7&quot;,&quot;text&quot;:&quot;Restart the Rails server and view the result by visiting http://localhost:4001/login. Then, log in to your app with the credentials you used to sign up.&quot;}]},{&quot;heading&quot;:&quot;Log out functionality&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_5_0&quot;,&quot;text&quot;:&quot;In the Sessions controller, make an action named `destroy`. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-logout\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.\n&quot;},{&quot;key&quot;:&quot;Newstand_5_1&quot;,&quot;text&quot;:&quot;In the routes file, map DELETE requests for the url /logout to the Sessions controller&#x27;s `destroy` action.&quot;}]},{&quot;heading&quot;:&quot;Require logged in users&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_6_0&quot;,&quot;text&quot;:&quot;The signup, login, and logout functionalities are now complete. However, there&#x27;s still a problem: anyone, even logged out users, can view individual articles. Let&#x27;s make sure the app requires users to be logged in to read individual articles.\n\nTo start, in the Application controller, set up the methods `current_user`, `require_user`, and `helper_method`. Adapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-current-user\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.&quot;},{&quot;key&quot;:&quot;Newstand_6_1&quot;,&quot;text&quot;:&quot;In the Articles controller, use the `before_action` command to require users to be logged in for all actions except the `index` action. Check out \u003Ca href=\&quot;http://guides.rubyonrails.org/action_controller_overview.html#filters\&quot; target=\&quot;_blank\&quot;\u003Ethis page\u003C/a\u003E for more information on \u003Ccode\u003Ebefore_action\u003C/code\u003E.\u003C/a\u003E&quot;},{&quot;key&quot;:&quot;Newstand_6_2&quot;,&quot;text&quot;:&quot;In **app/views/layouts/application.html.erb** under line 20, use `current_user` to update the nav items depending on whether the user is logged in:\n* If a user is logged in, show the user&#x27;s email and a \&quot;Log out\&quot; link\n* If a user is logged out, show a \&quot;Sign up\&quot; link and a \&quot;Log in\&quot; link\n\nAdapt your code \u003Ca href=\&quot;https://www.codecademy.com/en/learn/rails-auth/topics/authentication/exercises/authentication-filters\&quot; target=\&quot;_blank\&quot;\u003Efrom here\u003C/a\u003E.&quot;},{&quot;key&quot;:&quot;Newstand_6_3&quot;,&quot;text&quot;:&quot;Restart the Rails server and visit http://localhost:4001.\n* First log out of the app.\n* Then visit http://localhost:4001/. You should be able to access it even though you&#x27;re logged out.\n* Next visit http://localhost:4001/articles/1. Since the articles show page requires users to be logged in, you should be redirected to the login page.\n* Log in to the application. Now visit http://localhost:4001/articles/1. You should now be able to see it.&quot;}]},{&quot;heading&quot;:&quot;Challenges&quot;,&quot;tasks&quot;:[{&quot;key&quot;:&quot;Newstand_7_0&quot;,&quot;text&quot;:&quot;There are a few more things that you can add to your authentication system to make it more complete:\n1. After a user is logged in, she shouldn&#x27;t be able to see the signup page (http://localhost:4001/signup) or the login page (http://localhost:4001/login). Instead if she tries to visit either page, she should get redirected to the articles index page (http://localhost:4001/). Similar to how we required logged in users to view individual articles, require logged out users to view the signup and login pages.\n2. Add a profile page that shows the current user&#x27;s first name, last name and email. Require that a user be logged in to access the profile page. Also, update the nav items to show a \&quot;Profile\&quot; link if a user is logged in.\n3. Let a logged in user modify her profile page. In other words, let the current user edit and update her first name, last name, and email through the profile page.&quot;}]}],&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth_newstand&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;}},&quot;uuid&quot;:&quot;d851d1b975791e3516d1a8873118ab7b&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authentication/projects/rails-auth_newstand-1.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/projects/rails-auth_newstand-1&quot;,&quot;unit_slug&quot;:&quot;authentication&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false},&quot;rails-auth_newstand-2&quot;:{&quot;node_type&quot;:&quot;project&quot;,&quot;locale&quot;:&quot;en&quot;,&quot;slug&quot;:&quot;rails-auth_newstand-2&quot;,&quot;title&quot;:&quot;Newstand 2&quot;,&quot;description&quot;:&quot;In this project, you\u2019ll continue to work on Newstand to add a role based authorization system.&quot;,&quot;thumbnail_url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/project_thumbnails/rails-auth/newstand-2.jpg&quot;,&quot;preview_url&quot;:&quot;https://infinite-stream-5328.herokuapp.com/&quot;,&quot;qa_forum_url&quot;:&quot;https://www.codecademy.com/discourse_redirect/rails-auth/rails-authnewstand-2&quot;,&quot;objective&quot;:&quot;Newstand wants to add an authorization system to their news app where users who have an \&quot;author\&quot; role can edit and delete articles in their news app.\n\nUsing the \u003Ca href=\&quot;https://www.codecademy.com/articles/request-response-cycle-dynamic\&quot; target=\&quot;_blank\&quot;\u003Erequest/response cycle\u003C/a\u003E as a guide, there are 10 changes to be made.&quot;,&quot;meta&quot;:{&quot;authors&quot;:[&quot;BanaKM&quot;]},&quot;self_assessments&quot;:[{&quot;tasks&quot;:[{&quot;key&quot;:&quot;rails-auth_newstand-2_0_10&quot;,&quot;text&quot;:&quot;Continue building the Newstand project, which you \u003Ca href=\&quot;https://www.codecademy.com/en/practice/rails-auth/topics/authentication/projects/rails-auth_newstand-1\&quot; target=\&quot;_blank\&quot;\u003Estarted here\u003C/a\u003E. Start a Rails server to preview the app in the browser. In the terminal, type:\n\n```bash\n$ rails server -p 4001\n```\n\nThis command starts a Rails server listening on port 4001. &quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_0&quot;,&quot;text&quot;:&quot;To create an authorization system based on roles, let&#x27;s start by adding a \&quot;role\&quot; column to the users table. The users table already exists in the database, so modify it using this command:\n\n```bash\n$ rails generate migration AddRoleToUsers role:string\n```\n\nThis command generates a new migration file in **db/migrate/**. The name of the migration file starts with the timestamp of when it was created, followed by **add_role_to_users.rb**. Open this migration file in **db/migrate** to see what it looks like. The migration file has a statement to add a new string column named `role` to the users table.\n\nCheck out \u003Ca href=\&quot;http://guides.rubyonrails.org/active_record_migrations.html#creating-a-standalone-migration\&quot; target=\&quot;_blank\&quot;\u003Ethis page\u003C/a\u003E for more information on modifying a table by creating a standalone migration.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_1&quot;,&quot;text&quot;:&quot;Run the migration to update the users table with the new \&quot;role\&quot; column.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_2&quot;,&quot;text&quot;:&quot;Enter the Rails console, and create a new user with the role of \&quot;author\&quot; using the `create` method. \n\nCheck out \u003Ca href=\&quot;http://guides.rubyonrails.org/active_record_basics.html#create\&quot; target=\&quot;_blank\&quot;\u003Ethis page\u003C/a\u003E for an example of how to use the `create` command.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_3&quot;,&quot;text&quot;:&quot;In the User model, add a method named `author?` that determines whether a user as an author role on the site.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_4&quot;,&quot;text&quot;:&quot;Close and re-enter the Rails console, and confirm that you can use the `author?` method to check whether a user has an author role. Find the new user you added in **db/seeds.rb** and use `author?` to check whether that user has an author role.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_5&quot;,&quot;text&quot;:&quot;In the Application controller, add a method named `require_author`.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_6&quot;,&quot;text&quot;:&quot;In the Articles controller, create a before action that calls the `require_author` method before running the `edit`, `update`, or `destroy` actions.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_7&quot;,&quot;text&quot;:&quot;In **app/views/articles/show.html.erb**, use `author?` to display an \&quot;Edit\&quot; link and a \&quot;Delete\&quot; link only if a user is an author.&quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_8&quot;,&quot;text&quot;:&quot;Start a Rails server to preview the app in the browser. In the terminal, type:\n\n```bash\n$ rails s -p 4001 -b 0.0.0.0\n```\n\nThis command starts a Rails server listening on port 4001. &quot;},{&quot;key&quot;:&quot;rails-auth_newstand-2_0_9&quot;,&quot;text&quot;:&quot;Then visit http://localhost:4001 to see your app in the browser. To make sure the authorization system is working:\n* Log in as a user who isn&#x27;t an author, and visit http://localhost:3005/articles/1. The \&quot;Edit\&quot; and \&quot;Delete\&quot; links shouldn&#x27;t be visibile.\n* Log in as a user who is an author, and visit http://localhost:3005/articles/1. Now the \&quot;Edit\&quot; and \&quot;Delete\&quot; links should be visible.&quot;}]}],&quot;workspace&quot;:{&quot;slug&quot;:&quot;rails-auth_newstand&quot;,&quot;type&quot;:&quot;rails&quot;,&quot;backend&quot;:&quot;workshop&quot;},&quot;components&quot;:{&quot;WebBrowser&quot;:{&quot;_schema&quot;:&quot;WebBrowser&quot;},&quot;Terminal&quot;:{&quot;_schema&quot;:&quot;Terminal&quot;},&quot;PersistentCodeEditor&quot;:{&quot;files&quot;:[],&quot;_schema&quot;:&quot;PersistentCodeEditor&quot;}},&quot;uuid&quot;:&quot;ae6da4601221e9a28afb38ec39ae3f3f&quot;,&quot;filepath&quot;:&quot;new/content/courses/en/rails-auth/units/authorization/projects/rails-auth_newstand-2.en.yml&quot;,&quot;path&quot;:&quot;/en/courses/rails-auth/projects/rails-auth_newstand-2&quot;,&quot;unit_slug&quot;:&quot;authorization&quot;,&quot;course_slug&quot;:&quot;rails-auth&quot;,&quot;private&quot;:false}},&quot;lessons_order&quot;:[&quot;authentication&quot;,&quot;authorization&quot;],&quot;projects_order&quot;:[&quot;rails-auth_newstand-1&quot;,&quot;rails-auth_newstand-2&quot;]},&quot;courseInMaintenanace&quot;:false,&quot;segment&quot;:{&quot;_id&quot;:&quot;55a67b1c8493779f09000007&quot;,&quot;content_slug&quot;:&quot;rails-auth&quot;,&quot;content_type&quot;:&quot;Course&quot;,&quot;hidden&quot;:false,&quot;name&quot;:&quot;Ruby on Rails: Authentication&quot;,&quot;description&quot;:&quot;Learn how to add user sign up, login and logout functionality to your Rails applications in this intermediate course.&quot;,&quot;time&quot;:&quot;2 Hours&quot;,&quot;enrolled&quot;:&quot;2K+&quot;,&quot;level&quot;:&quot;Intermediate&quot;,&quot;icon&quot;:{&quot;type&quot;:&quot;url&quot;,&quot;value&quot;:&quot;https://codecademy-images.s3.amazonaws.com/icon_rails.svg&quot;},&quot;resume_path&quot;:&quot;/en/courses/rails-auth/resume&quot;,&quot;return_path&quot;:&quot;/en/courses/rails-auth&quot;,&quot;partner&quot;:null,&quot;requirements&quot;:[&quot;learn-rails&quot;],&quot;progress&quot;:{&quot;percent_complete&quot;:21,&quot;last_active&quot;:&quot;2017-10-13T01:16:49+00:00&quot;,&quot;total&quot;:2,&quot;projects&quot;:{&quot;complete&quot;:0,&quot;total&quot;:2,&quot;percent_complete&quot;:0},&quot;quizzes&quot;:{&quot;all&quot;:{&quot;rails-auth-quiz-1&quot;:{&quot;quiz_slug&quot;:&quot;rails-auth-quiz-1&quot;,&quot;total&quot;:null,&quot;highest_pct&quot;:0.0,&quot;correct&quot;:null,&quot;pct&quot;:null,&quot;passed&quot;:null,&quot;passed_any&quot;:false,&quot;taken&quot;:false,&quot;quiz_attempts&quot;:[]},&quot;rails-auth-quiz-2&quot;:{&quot;quiz_slug&quot;:&quot;rails-auth-quiz-2&quot;,&quot;total&quot;:null,&quot;highest_pct&quot;:0.0,&quot;correct&quot;:null,&quot;pct&quot;:null,&quot;passed&quot;:null,&quot;passed_any&quot;:false,&quot;taken&quot;:false,&quot;quiz_attempts&quot;:[]}},&quot;total&quot;:2,&quot;complete&quot;:0,&quot;passed&quot;:0,&quot;percent_complete&quot;:0}},&quot;units&quot;:[{&quot;name&quot;:&quot;Authentication&quot;,&quot;slug&quot;:&quot;authentication&quot;,&quot;type&quot;:&quot;unit&quot;,&quot;lessons&quot;:[{&quot;slug&quot;:&quot;authentication&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;type&quot;:&quot;lesson&quot;,&quot;should_show&quot;:true,&quot;description&quot;:&quot;Build a system to let users sign up, log in, and log out of your app.&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/lessons/authentication/resume&quot;,&quot;locked&quot;:false,&quot;progress&quot;:{&quot;percent_complete&quot;:33}}],&quot;projects&quot;:[{&quot;slug&quot;:&quot;rails-auth_newstand-1&quot;,&quot;title&quot;:&quot;Newstand 1&quot;,&quot;type&quot;:&quot;project&quot;,&quot;description&quot;:&quot;In this project, you\u2019ll add sign up, log in, and log out system from scratch.&quot;,&quot;thumbnail_url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/project_thumbnails/rails-auth/newstand-1.jpg&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/projects/rails-auth_newstand-1&quot;,&quot;locked&quot;:false,&quot;should_show&quot;:true,&quot;progress&quot;:{&quot;percent_complete&quot;:0},&quot;achievement&quot;:null}],&quot;quizzes&quot;:[{&quot;slug&quot;:&quot;rails-auth-quiz-1&quot;,&quot;title&quot;:&quot;Authentication&quot;,&quot;type&quot;:&quot;quiz&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/units/authentication/quizzes/rails-auth-quiz-1&quot;,&quot;locked&quot;:false,&quot;should_show&quot;:true,&quot;achievement&quot;:null,&quot;free_trial&quot;:false}],&quot;resources&quot;:[{&quot;title&quot;:&quot;Modeling users&quot;,&quot;url&quot;:&quot;https://www.railstutorial.org/book/modeling_users&quot;,&quot;type&quot;:&quot;resource&quot;,&quot;read_time&quot;:15,&quot;advisor_added&quot;:false,&quot;visited_verb&quot;:null},{&quot;title&quot;:&quot;Sign Up&quot;,&quot;url&quot;:&quot;https://www.railstutorial.org/book/sign_up&quot;,&quot;type&quot;:&quot;resource&quot;,&quot;read_time&quot;:6,&quot;advisor_added&quot;:false,&quot;visited_verb&quot;:null}]},{&quot;name&quot;:&quot;Authorization&quot;,&quot;slug&quot;:&quot;authorization&quot;,&quot;type&quot;:&quot;unit&quot;,&quot;lessons&quot;:[{&quot;slug&quot;:&quot;authorization&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;type&quot;:&quot;lesson&quot;,&quot;should_show&quot;:true,&quot;description&quot;:&quot;Give specific users permission to access certain parts of your app.&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/lessons/authorization/resume&quot;,&quot;locked&quot;:true,&quot;progress&quot;:{&quot;percent_complete&quot;:0}}],&quot;projects&quot;:[{&quot;slug&quot;:&quot;rails-auth_newstand-2&quot;,&quot;title&quot;:&quot;Newstand 2&quot;,&quot;type&quot;:&quot;project&quot;,&quot;description&quot;:&quot;In this project, you\u2019ll continue to work on Newstand to add a role based authorization system.&quot;,&quot;thumbnail_url&quot;:&quot;https://s3.amazonaws.com/codecademy-content/projects/project_thumbnails/rails-auth/newstand-2.jpg&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/projects/rails-auth_newstand-2&quot;,&quot;locked&quot;:true,&quot;should_show&quot;:true,&quot;progress&quot;:{&quot;percent_complete&quot;:0},&quot;achievement&quot;:null}],&quot;quizzes&quot;:[{&quot;slug&quot;:&quot;rails-auth-quiz-2&quot;,&quot;title&quot;:&quot;Authorization&quot;,&quot;type&quot;:&quot;quiz&quot;,&quot;resume_path&quot;:&quot;/en/courses/rails-auth/units/authorization/quizzes/rails-auth-quiz-2&quot;,&quot;locked&quot;:true,&quot;should_show&quot;:true,&quot;achievement&quot;:null,&quot;free_trial&quot;:false}],&quot;resources&quot;:[{&quot;title&quot;:&quot;Authorization&quot;,&quot;url&quot;:&quot;https://www.railstutorial.org/book/updating_and_deleting_users#sec-authorization&quot;,&quot;type&quot;:&quot;resource&quot;,&quot;read_time&quot;:11,&quot;advisor_added&quot;:false,&quot;visited_verb&quot;:null}]}],&quot;achievements&quot;:[]}},&quot;prerender&quot;:{&quot;duration&quot;:123.51880899999999,&quot;hostname&quot;:&quot;app-092\n&quot;}}"><section class="_255U1OEW5iAFH7qz_pHXM8" data-reactroot="" data-reactid="1" data-react-checksum="-1945006557"><div id="workspace" class="francine" data-reactid="2"><!-- react-empty: 3 --><header class="_2m_hDXMtwvETHFo3eGaTXE" data-react-header="true" data-reactid="4"><nav class="y7tvmmg7fKu4JpdaYECtN _2Tp4ILE5wDYNdLO-nT8psj" data-reactid="5"><section class="_2zSA2d9oAw82vmGaiCI6HM vE2U5Z1_1p0OevhTkRrpb" data-reactid="6"><div class="_3bI54mnYg5essxyEwnBsko _3nDVtg6dS-0_R6p0nDL-1S" data-reactid="7"><a class="_1xOZs_2pgZHAoG4MALaCgS" href="/" data-reactid="8"><img alt="Codecademy logo" class="_39eW0wHuW9g7pG5q6TF7cE" src="//production.cdmycdn.com/webpack/320849c9802d2745608402037bdc6a05.svg" data-reactid="9"/></a></div></section><section class="_2zSA2d9oAw82vmGaiCI6HM AcoUR5q2eKWoCC4M_4RZD" data-reactid="10"><a class="_10tr0UBdh7IJTF1w-ahcOa _2Ik8dH0qI7ki4IMCQbG6pZ" href="/en/courses/rails-auth" data-reactid="11"><i class="_2s1fAUUBvIvC87s1stozEY fcn-icon fcn-icon-arrowPrev" data-reactid="12"></i><!-- react-text: 13 -->Ruby on Rails: Authentication<!-- /react-text --></a></section><section class="_2zSA2d9oAw82vmGaiCI6HM _1KKDVD6unnpNtKqV9PPUQP" data-reactid="14"><div class="_3bI54mnYg5essxyEwnBsko _1f1KmfrKUtLxZllTyx0TrC _3nDVtg6dS-0_R6p0nDL-1S _2kwp78w4gxSQjvTSajoa6Q" data-reactid="15"><div class="fcn-godex-status-container" data-reactid="16"><div class="fcn-godex-status--hidden fcn-godex-status" data-reactid="17"><span data-reactid="18"></span><div class="fcn-godex-status__glow" data-reactid="19"></div></div></div></div><div class="_3bI54mnYg5essxyEwnBsko _1f1KmfrKUtLxZllTyx0TrC _3nDVtg6dS-0_R6p0nDL-1S" data-reactid="20"><div class="_3wrXGt5j2uE4fjlPLrDXEA" data-reactid="21"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _1i2HDK_zSufmryADoGTYpD" data-reactid="22"><span data-reactid="23"><div class="_2gwf_JaG35W2Q5PrPxyOlQ _3vnnbQAlMOhQFZ-wuCOyca" data-reactid="24"><span class="new-cc-icon icon-bell" data-reactid="25"></span></div></span></div><!-- react-empty: 26 --></div></div><div class="_3bI54mnYg5essxyEwnBsko _1f1KmfrKUtLxZllTyx0TrC _3nDVtg6dS-0_R6p0nDL-1S" data-reactid="27"><div class="_3wrXGt5j2uE4fjlPLrDXEA" data-reactid="28"><button id="dropdown-toggle" class="_3beJdIRG9xxfeiRwaBD9Cp" data-reactid="29"><div class="Y8dknuoW8NLiudcM-zQib _1pl0auxsnexFW5uqwCQW_x _2tbl3cOSPjsfIWBMlHZgcG" data-reactid="30"><img class="wXEAS7H2e7UsikVkXNety" src="https://graph.facebook.com/v2.8/10212772465970945/picture" data-reactid="31"/></div></button><!-- react-empty: 32 --></div></div></section></nav></header><div class="discovery-cue discovery-cue--hidden" style="left:NaN%;top:NaN%;" data-reactid="33"><div class="discovery-cue--content-container" data-reactid="34"><div class="discovery-cue__arrow" data-reactid="35"></div><p class="discovery-cue--content" data-reactid="36">Drag the edges to resize the window.</p></div><div class="pulse" data-reactid="37"></div></div><div class="discovery-cue discovery-cue--hidden" style="left:NaN%;top:NaN%;" data-reactid="38"><div class="discovery-cue--content-container" data-reactid="39"><div class="discovery-cue__arrow" data-reactid="40"></div><p class="discovery-cue--content" data-reactid="41">In Projects, you can keep track of your progress as you go throught the tasks. Check each item as you complete it!</p></div><div class="pulse" data-reactid="42"></div></div><div class="fcn-grid" style="cursor:auto;" data-reactid="43"><div id="discovery-resize-4" class="fcn-slot fcn-slot--no-bottom-neighbor" style="position:absolute;top:50%;right:33.33333333333334%;bottom:0%;left:33.33333333333333%;" data-fcn-arrangement="4" data-reactid="44"><div class="fcn-component disabled" data-reactid="45"><div class="overlay" data-reactid="46"></div><div class="fcn-terminal-container fcn-terminal-container--with-header" data-reactid="47"><div class="fcn-component-header fcn-component-header--tabs" data-reactid="48"><div class="fcn-tabs" data-reactid="49"><span class="fcn-tabs__tab fcn-button fcn-button--tab fcn-button--tab--inactive fcn-button--tab--disabled fcn-icon fcn-icon-plus fcn-control" overflow="false" style="max-width:200px;" data-reactid="50"></span><div class="fcn-tabs-container__inner" data-reactid="51"></div><span class="fcn-tabs__tab fcn-tabs__tab--align-right fcn-button fcn-button--tab fcn-button--tab--inactive fcn-control fcn-icon fcn-icon-fullscreen" overflow="false" style="max-width:200px;" data-reactid="52"></span></div></div><div class="fcn-terminal-container__placeholder" data-reactid="53"><div class="fcn-terminal-container__placeholder__body" data-reactid="54"><div class="fcn-terminal-container__placeholder__icon fcn-icon fcn-icon-terminal" data-reactid="55"></div><span class="fcn-terminal-container__placeholder__text" data-reactid="56">Terminal</span></div></div><!-- react-empty: 57 --></div></div></div><div id="discovery-resize-1" class="fcn-slot fcn-slot--no-top-neighbor" style="position:absolute;top:0%;right:33.33333333333334%;bottom:50%;left:33.33333333333333%;" data-fcn-arrangement="1" data-reactid="58"><div class="fcn-component disabled" data-reactid="59"><div class="overlay" data-reactid="60"></div><div class="_3xwXqfnfophSAz4k43MZx0" data-reactid="61"><div data-reactid="62"><!-- react-empty: 63 --></div><!-- react-empty: 64 --><!-- react-empty: 65 --><div class="UOyJ1QHGjs_CaX0WcMfJz" data-reactid="66"><div class="_2ecPkdASqbJY2gtDfJzOEI mjfIa9AJdTCwgsNdyS19p" data-reactid="67"><div class="_1xYsKECYwIBS11UWPDPPiW" data-reactid="68"><p class="_1-YCywxtxg6JvYzWFaC1p _33HbdmMgZSIgji1116HPix" data-reactid="69"></p><div data-reactid="70"><div class="_2Bvd5Z1s1DcnwDsezQIfQy" data-reactid="71"><div class="_1dL0UNjWQnFTmXtH4QiRcP" data-reactid="72"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _3VCznYtrtljbygtFhuZMu3" data-reactid="73"><i name="folder" class="_3QwoyZ-5nUFRrbC-LsvaCS W6YEe9sod8XzMrxhIjZB8" data-reactid="74"></i></div></div></div></div><!-- react-empty: 75 --></div></div><div class="editor _1fKr1-XLqTz9M9XDJjrWvo" data-reactid="76"><div class="fcn-component-header" data-reactid="77"><div class="u-hZdX9hXh9Bci8VNUp7s" data-reactid="78"><div class="fcn-tabs" data-reactid="79"><span class="fcn-tabs__tab fcn-tabs__tab--align-right fcn-button fcn-button--tab fcn-button--tab--inactive fcn-control" data-cue="discovery-fullscreen" overflow="false" style="max-width:200px;" data-reactid="80"><i name="fullscreen" class="_3QwoyZ-5nUFRrbC-LsvaCS _2fS_OWNv_ecvbxHy0AwJKk" data-reactid="81"></i></span></div></div></div><div class="editor-container" data-reactid="82"><div class="fcn-code-editor__placeholder" data-reactid="83"><div class="fcn-code-editor__placeholder__icon" style="padding-right:12px;" data-reactid="84"><i name="file-alt" size="3" class="_3QwoyZ-5nUFRrbC-LsvaCS _3MdObGkDEKZafSNWk0Xczs" style="font-size:48px;" data-reactid="85"></i></div><div style="margin-top:15px;" data-reactid="86">Code Editor</div></div></div><div class="editor-footer-container" data-reactid="87"><!-- react-empty: 88 --><div class="editor-footer" data-reactid="89"><div class="fcn-tabs-container" data-reactid="90"><div class="editor-footer__buttons" data-reactid="91"><div class="_2SwuUNiEqk9B4NR0dyMMmn" data-reactid="92"><button data-btn="true" style="min-width:80px;" disabled="" class="_2fDy3KzGIsY8FHMg74ib-V lx0K4MugD9fFT3l5pAqK1 _3JhIcVa8SAUiC1_ZETEt6G" data-reactid="93">Run</button><div class="_2rMsW52-vRt_jDn9YIoIoj" data-reactid="94"><span class="_2ieC2TsGV0VNSmeBczgbwo" data-reactid="95">Reset Exercise</span><div class="bCD0tEslEFIV_i4IX_5ip" data-reactid="96"></div><span class="fcn-tabs__tab fcn-button fcn-button--tab fcn-button--tab--inactive fcn-control" overflow="false" style="max-width:200px;" data-reactid="97"><i name="reset" class="_3QwoyZ-5nUFRrbC-LsvaCS _3LkjVgY6sd3NulMSJp3dAY" data-reactid="98"></i></span></div><div class="peer-controls" data-reactid="99"><div class="_-p9pmsU8mF_fLW8-K3lJs" data-reactid="100"><span class="_2AuKqup-Jwu723mf_JKOp_" data-reactid="101">Share Code</span><div class="_19wFaW816sNr-Sp-A60kee" data-reactid="102"></div><span class="fcn-tabs__tab fcn-button fcn-button--tab fcn-button--tab--inactive fcn-control" overflow="false" style="max-width:200px;" data-reactid="103"><i name="share" class="_3QwoyZ-5nUFRrbC-LsvaCS _2Ma9LFTE4CabXeaBsi9Npa" data-reactid="104"></i></span></div></div></div></div></div></div></div></div></div></div></div></div><div id="discovery-resize-25" class="fcn-slot fcn-slot--no-top-neighbor fcn-slot--no-right-neighbor fcn-slot--no-bottom-neighbor" style="position:absolute;top:0%;right:0%;bottom:0%;left:66.66666666666666%;" data-fcn-arrangement="25" data-reactid="105"><div class="fcn-component disabled" data-reactid="106"><div class="overlay" data-reactid="107"></div><div class="_1XRkeRcO7hh1axYhmKiQMM _3l5vJxhTbS1dLnkuNf4EaO CGAmiC7XFUbztkDJDC6gJ _2OvvmRIMuApp9TWMONyVY" data-reactid="108"><div class="_1XRkeRcO7hh1axYhmKiQMM _3zmXSoSKWDZwAbwY9BEJ3U" data-reactid="109"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _3VCznYtrtljbygtFhuZMu3" data-reactid="110"><i name="arrow-thin-left" class="_3QwoyZ-5nUFRrbC-LsvaCS _2DRF0mEeD3kktNs1rQjEmB" data-reactid="111"></i></div><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _3VCznYtrtljbygtFhuZMu3" data-reactid="112"><i name="refresh" class="_3QwoyZ-5nUFRrbC-LsvaCS _9n2A_QUFSbpWAfM7S4vd0" data-reactid="113"></i></div><div class="_1XRkeRcO7hh1axYhmKiQMM _3l5vJxhTbS1dLnkuNf4EaO CGAmiC7XFUbztkDJDC6gJ _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _3sETS9JJLUqGkoznU-8YAu" data-reactid="114"><input type="text" class="_11Puwwj-R91dvpnHmBsMY7" placeholder="Type URL here" data-reactid="115"/></div><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _3VCznYtrtljbygtFhuZMu3" data-reactid="116"><i name="fullscreen" class="_3QwoyZ-5nUFRrbC-LsvaCS _2fS_OWNv_ecvbxHy0AwJKk" data-reactid="117"></i></div></div><div class="_1XRkeRcO7hh1axYhmKiQMM _3l5vJxhTbS1dLnkuNf4EaO CGAmiC7XFUbztkDJDC6gJ _2OvvmRIMuApp9TWMONyVY _2thFqfPxT5Ddfc14CgiZqJ" data-reactid="118"><div class="_1XRkeRcO7hh1axYhmKiQMM _3l5vJxhTbS1dLnkuNf4EaO CGAmiC7XFUbztkDJDC6gJ _2OvvmRIMuApp9TWMONyVY _39K0C3ph1hpmLw6tsBfNnG GEk9Sbt3OmLggMB2aQtSj _3bADe6ag4wwBffEyE7bJ2O _2MHZDvkiIZKj8Se2ziQBfY" data-reactid="119"><i name="explore" size="3" class="_3QwoyZ-5nUFRrbC-LsvaCS _1QDkpLnQ1Ql3Q8znCwA1p-" style="font-size:48px;" data-reactid="120"></i><div class="_1M6xxzpBgnnZ5pMaxvOnjP" data-reactid="121">Web Browser</div></div></div><!-- react-empty: 122 --></div></div></div><div id="discovery-resize-03" class="fcn-slot fcn-slot--no-top-neighbor fcn-slot--no-bottom-neighbor fcn-slot--no-left-neighbor" style="position:absolute;top:0%;right:66.66666666666667%;bottom:0%;left:0%;" data-fcn-arrangement="03" data-reactid="123"><div class="fcn-component" data-reactid="124"><div class="overlay" data-reactid="125"></div><div data-reactid="126"><div class="accordion-container" data-reactid="127"><div class="accordion" data-reactid="128"><div class="accordion-section" data-reactid="129"><div data-index="0" class="accordion-section-heading" data-reactid="130"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG learn-header" data-reactid="131"><i class="_3QwoyZ-5nUFRrbC-LsvaCS _1Yp0Evc34IpeX4cliaOuxn _-28pXLJ13HOUfP_2pXrEi" name="learn" data-reactid="132"></i><!-- react-text: 133 -->Learn<!-- /react-text --></div></div><div class="accordion-section-body" data-reactid="134"><div class="_1PzvoBkjTI2SFvb5o9YAHW" data-reactid="135"><div class="_3gk_DKHLRJuZpEOugKJSur" data-reactid="136">Authentication</div><h1 class="_2zPle5d5nr1wxSe5NwLfcB" data-reactid="137">Signup I</h1><div class="jfdpfOzslotw2euWgxJNN" data-reactid="138"><p>Nice work! You&#39;ve added columns to the users table and ran a migration to update the database.</p>
<p>What&#39;s the <code>password_digest</code> column for? When a user submits her password, it&#39;s not a good idea to store that password as is in the database; if an attacker somehow gets into your database, he would be able to see all your users&#39; passwords.</p>
<p>One way to defend against this is to store passwords as encrypted strings in the database. This is what the <code>has_secure_password</code> method helps with - it uses the bcrypt algorithm to securely hash a user&#39;s password, which then gets saved in the <code>password_digest</code> column.</p>
<p>Then when a user logs in again, <code>has_secure_password</code> will collect the password that was submitted, hash it with bcrypt, and check if it matches the hash in the database. </p>
</div></div></div></div><div class="accordion-section" data-reactid="139"><div data-index="1" class="accordion-section-heading" data-reactid="140"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG support-header" data-reactid="141"><i class="_3QwoyZ-5nUFRrbC-LsvaCS _2d4F_uhsoeUW39e5KLQ7A_ _-28pXLJ13HOUfP_2pXrEi" name="support" data-reactid="142"></i><!-- react-text: 143 -->Report a Bug<!-- /react-text --></div></div><div class="accordion-section-body" data-reactid="144"><div class="accordion-section-body__no-bg accordion-section-body__padded _1OKgxa6eFiKV7bZx2Cpyve" data-reactid="145"><span data-reactid="146"><div class="VaiJa78yYYnolwnIsOcUV" data-reactid="147"><!-- react-text: 148 -->If you see a bug or any other issue with this page, please report it <!-- /react-text --><a class="_2gPEYd35kAAQ2razCHgCKk" href="#" data-reactid="149">here</a><!-- react-text: 150 -->.<!-- /react-text --></div></span></div></div></div></div></div><div class="sticky-bottom" data-reactid="151"><div class="accordion-section-heading invisible" data-index="0" data-reactid="152"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG learn-header" data-reactid="153"><i class="_3QwoyZ-5nUFRrbC-LsvaCS _1Yp0Evc34IpeX4cliaOuxn _-28pXLJ13HOUfP_2pXrEi" name="learn" data-reactid="154"></i><!-- react-text: 155 -->Learn<!-- /react-text --></div></div><div class="accordion-section-heading invisible" data-index="1" data-reactid="156"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG support-header" data-reactid="157"><i class="_3QwoyZ-5nUFRrbC-LsvaCS _2d4F_uhsoeUW39e5KLQ7A_ _-28pXLJ13HOUfP_2pXrEi" name="support" data-reactid="158"></i><!-- react-text: 159 -->Report a Bug<!-- /react-text --></div></div></div><div class="sticky-top" data-reactid="160"><div class="accordion-section-heading invisible" data-index="0" data-reactid="161"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG learn-header" data-reactid="162"><i class="_3QwoyZ-5nUFRrbC-LsvaCS _1Yp0Evc34IpeX4cliaOuxn _-28pXLJ13HOUfP_2pXrEi" name="learn" data-reactid="163"></i><!-- react-text: 164 -->Learn<!-- /react-text --></div></div><div class="accordion-section-heading invisible" data-index="1" data-reactid="165"><div class="_1XRkeRcO7hh1axYhmKiQMM _39K0C3ph1hpmLw6tsBfNnG support-header" data-reactid="166"><i class="_3QwoyZ-5nUFRrbC-LsvaCS _2d4F_uhsoeUW39e5KLQ7A_ _-28pXLJ13HOUfP_2pXrEi" name="support" data-reactid="167"></i><!-- react-text: 168 -->Report a Bug<!-- /react-text --></div></div></div></div></div></div></div><div class="fcn-achievement-alerts" data-reactid="169"><ul class="fcn-achievement-alerts__list" data-reactid="170"></ul></div><nav title="4. Signup I" class="y7tvmmg7fKu4JpdaYECtN uLjMYUmq7NHQCvtXjbgKs _3bR5y3xpD2FPv1oUg-7n_p" data-reactid="171"><section class="_2zSA2d9oAw82vmGaiCI6HM vE2U5Z1_1p0OevhTkRrpb" data-reactid="172"><div class="_3bI54mnYg5essxyEwnBsko" data-reactid="173"><a href="#" title="4. Signup I" class="sQnqIKjyMIkRzU8m4doIc" data-reactid="174"><span class="_3m2VRSnyzwTJFQ2lQGREuS" data-reactid="175"></span><span data-cue="course-navigator" class="_3oO95TdRvdS0utiixuV0t3" data-reactid="176">4. Signup I</span></a></div></section><section class="_2zSA2d9oAw82vmGaiCI6HM AcoUR5q2eKWoCC4M_4RZD" data-reactid="177"><div class="fcn-nav-wrapper" data-reactid="178"><div class="fcn-nav-wrapper__center fcn-progress-container" data-reactid="179"><button class="fcn-button fcn-button--everyday" data-reactid="180">Back</button><div class="fnc-nav__exercise-count" data-reactid="181">4/12</div><button id="discovery-next" class="fcn-button fcn-button--lantern--go" data-reactid="182">Next</button></div></div></section><section class="_2zSA2d9oAw82vmGaiCI6HM _1KKDVD6unnpNtKqV9PPUQP" data-reactid="183"><button class="fcn-button fcn-button--everyday" data-reactid="184"><!-- react-text: 185 -->Get Help<!-- /react-text --><!-- react-empty: 186 --></button></section><!-- react-empty: 187 --></nav></div><!-- react-empty: 188 --></section></div>



      





    

    
<script id="I18N" type="text/javascript">
//<![CDATA[

  var I18n = (window.I18n || {});
  I18n.defaultLocale = "en";
  I18n.fallbacks = true;
  I18n.locale = "en";
  I18n.missingTranslationPrefix = '';
    I18n.missingBehaviour = 'guess';

//]]>
</script><script src="https://production.cdmycdn.com/assets/i18n/locale-en-b891eb61bbd4ae8dea06628624e398b1.js" type="text/javascript"></script>

        <script src="//production.cdmycdn.com/webpack/vendor-047e7ce4e4101021149d.js" type="text/javascript"></script>
    <script src="//production.cdmycdn.com/webpack/platform-047e7ce4e4101021149d.js" type="text/javascript"></script>
    <!-- Google Adwords Scripts -->
    <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion_async.js" charset="utf-8"></script>
    <noscript>
      <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/861461659/?guid=ON&amp;script=0"/>
      </div>
    </noscript>
    <!-- End Google Adwords Scripts -->

  </body>
</html>
